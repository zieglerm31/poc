"use strict";
;
function overload_dispatch(event) {
    return "ocadminv5:h3irs:dropevent";
    var namespace = "ocadmin";
    namespace = dispatch(event);
    return namespace;
}
function dispatch(event) {
    var _a, _b;
    var namespace = "ocadminv5";
    try {
        if (event["header"] != null) {
            if (event["header"]["overloadedQueueList"] != null) {
                if (!(event["header"]["overloadedQueueList"][0].match(/^monitor/))) {
                    return namespace + ":h3irs:dropevent";
                }
            }
        }
    }
    catch (e) {
    }
    try {
        if (event["event-label-match"] != null && event["event-label-match"] == true) {
            namespace = "stagingv5";
        }
    }
    catch (e) {
    }
    if (event["event-type"] === "fake") {
        return namespace + ":h3irs:drop";
    }
    try {
        if (event.SIP) {
            try {
                if (event.SIP.message.method[0].match(/^OPTIONS$/) && event.SIP["R-URI"].address.uri.user != null) {
                    if (event.SIP["R-URI"].address.uri.user.match(/^h3irs_/)) {
                        if (((_a = event["event-additional-info"]) === null || _a === void 0 ? void 0 : _a["dispatcherresult"]) != null) {
                            event["event-additional-info"]["dispatcherresult"] = namespace + "_sipoption" + namespace + ":h3irs:h3irs_InternationalRoamingService_main";
                        }
                        return namespace + ":h3irs:h3irs_InternationalRoamingService_main";
                    }
                }
            }
            catch (e) {
                if (((_b = event["event-additional-info"]) === null || _b === void 0 ? void 0 : _b["dispatcherresult"]) != null) {
                    event["event-additional-info"]["dispatcherresult"] = namespace + "_exceptionoption" + namespace + ":h3irs:drop";
                }
                return namespace + ":h3irs:drop";
            }
            try {
                if (event["SIP"]["Route"][0]["address"]["uri"]["host"].match(/^irs/)) {
                    if (event["event-additional-info"] != null) {
                        event["event-additional-info"]["dispatcherresult"] = namespace + "_irs" + namespace + ":h3irs:h3irs_InternationalRoamingService_main";
                    }
                    return namespace + ":h3irs:h3irs_InternationalRoamingService_main";
                }
            }
            catch (e) {
                if (event["event-additional-info"] != null) {
                    event["event-additional-info"]["dispatcherresult"] = namespace + "_exceptionroutehf" + namespace + ":h3irs:h3irs_InternationalRoamingService_main";
                }
                return namespace + ":h3irs:drop";
            }
        }
    }
    catch (e) {
        if (event["event-additional-info"] != null) {
            event["event-additional-info"]["dispatcherresult"] = namespace + "_exceptionsip" + namespace + ":h3irs:h3irs_InternationalRoamingService_main";
        }
        return namespace + ":h3irs:drop";
    }
    try {
        if (event["event"]["camel"]) {
            try {
                if (event["event-additional-info"] != null) {
                    event["event-additional-info"]["dispatcherresult"] = namespace + "_irs" + namespace + ":h3irs:h3irs_InternationalRoamingService_main";
                }
                return namespace + ":h3irs:h3irs_InternationalRoamingService_main";
            }
            catch (e) {
                if (event["event-additional-info"] != null) {
                    event["event-additional-info"]["dispatcherresult"] = namespace + "_exceptionroutecamel" + namespace + ":h3irs:h3irs_InternationalRoamingService_main";
                }
                return namespace + ":h3irs:drop";
            }
        }
    }
    catch (e) {
        if (event["event-additional-info"] != null) {
            event["event-additional-info"]["dispatcherresult"] = namespace + "_exceptionscap" + namespace + ":h3irs:h3irs_InternationalRoamingService_main";
        }
        return namespace + ":h3irs:drop";
    }
    if (event["event-additional-info"] != null) {
        event["event-additional-info"]["dispatcherresult"] = namespace + "_default" + namespace + ":h3irs:drop";
    }
    return namespace + ":h3irs:drop";
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxDQUFDO0FBT0QsU0FBUyxpQkFBaUIsQ0FBRSxLQUFXO0lBQ25DLE9BQU8sMkJBQTJCLENBQUM7SUFFbkMsSUFBSSxTQUFTLEdBQVUsU0FBUyxDQUFDO0lBQ2pDLFNBQVMsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUIsT0FBTyxTQUFTLENBQUM7QUFDckIsQ0FBQztBQUdELFNBQVMsUUFBUSxDQUFDLEtBQUs7O0lBRW5CLElBQUksU0FBUyxHQUFHLFdBQVcsQ0FBQztJQUk1QixJQUFJO1FBQ0EsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUUsSUFBSSxFQUFFO1lBY3ZCLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLElBQUUsSUFBSSxFQUFFO2dCQUc5QyxJQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRTtvQkFFakUsT0FBTyxTQUFTLEdBQUcsa0JBQWtCLENBQUM7aUJBQ3pDO2FBQ0o7U0FDSjtLQUNKO0lBQUMsT0FBTyxDQUFDLEVBQUU7S0FFWDtJQUdELElBQUk7UUFJQSxJQUFJLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxJQUFFLElBQUksSUFBSSxLQUFLLENBQUMsbUJBQW1CLENBQUMsSUFBRSxJQUFJLEVBQUU7WUFDdEUsU0FBUyxHQUFDLFdBQVcsQ0FBQztTQUN6QjtLQUNKO0lBQUMsT0FBTyxDQUFDLEVBQUU7S0FFWDtJQVNELElBQUksS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFJLE1BQU0sRUFBRztRQU9oQyxPQUFPLFNBQVMsR0FBRyxhQUFhLENBQUM7S0FDcEM7SUFJRCxJQUFJO1FBQ0EsSUFBSSxLQUFLLENBQUMsR0FBRyxFQUFFO1lBQ1gsSUFBSTtnQkFFQSxJQUFLLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUU7b0JBQ2hHLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEVBQUU7d0JBQ3RELElBQUksQ0FBQSxNQUFBLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQywwQ0FBRyxrQkFBa0IsQ0FBQyxLQUFJLElBQUksRUFBRTs0QkFDOUQsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRyxTQUFTLEdBQUcsWUFBWSxHQUFHLFNBQVMsR0FBRywrQ0FBK0MsQ0FBQzt5QkFDL0k7d0JBQ0QsT0FBTyxTQUFTLEdBQUcsK0NBQStDLENBQUM7cUJBQ3RFO2lCQUNKO2FBQ0o7WUFBQyxPQUFPLENBQUMsRUFBRTtnQkFDUixJQUFJLENBQUEsTUFBQSxLQUFLLENBQUMsdUJBQXVCLENBQUMsMENBQUcsa0JBQWtCLENBQUMsS0FBSSxJQUFJLEVBQUU7b0JBQzlELEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUUsU0FBUyxHQUFHLGtCQUFrQixHQUFHLFNBQVMsR0FBRyxhQUFhLENBQUM7aUJBQ2xIO2dCQUNELE9BQU8sU0FBUyxHQUFHLGFBQWEsQ0FBQzthQUNwQztZQUNELElBQUk7Z0JBRUEsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFO29CQUNsRSxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLElBQUksRUFBRTt3QkFDeEMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRSxTQUFTLEdBQUcsTUFBTSxHQUFHLFNBQVMsR0FBRywrQ0FBK0MsQ0FBQztxQkFDeEk7b0JBQ0QsT0FBTyxTQUFTLEdBQUcsK0NBQStDLENBQUM7aUJBQ3RFO2FBQ0o7WUFBQyxPQUFPLENBQUMsRUFBRTtnQkFDUixJQUFJLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLElBQUksRUFBRTtvQkFDeEMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRSxTQUFTLEdBQUcsbUJBQW1CLEdBQUcsU0FBUyxHQUFHLCtDQUErQyxDQUFDO2lCQUNySjtnQkFDRCxPQUFPLFNBQVMsR0FBRyxhQUFhLENBQUM7YUFDcEM7U0FDSjtLQUNKO0lBQUMsT0FBTyxDQUFDLEVBQUU7UUFDUixJQUFJLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLElBQUksRUFBRTtZQUN4QyxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFFLFNBQVMsR0FBRyxlQUFlLEdBQUcsU0FBUyxHQUFHLCtDQUErQyxDQUFDO1NBQ2pKO1FBQ0QsT0FBTyxTQUFTLEdBQUcsYUFBYSxDQUFDO0tBQ3BDO0lBRUQsSUFBSTtRQUNBLElBQUssS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFHO1lBQzNCLElBQUk7Z0JBRUEsSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsSUFBSSxJQUFJLEVBQUU7b0JBQ3BDLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUUsU0FBUyxHQUFHLE1BQU0sR0FBRyxTQUFTLEdBQUcsK0NBQStDLENBQUM7aUJBQ3hJO2dCQUNELE9BQU8sU0FBUyxHQUFHLCtDQUErQyxDQUFDO2FBQzFFO1lBQUMsT0FBTyxDQUFDLEVBQUU7Z0JBQ1IsSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsSUFBSSxJQUFJLEVBQUU7b0JBQ3hDLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEdBQUUsU0FBUyxHQUFHLHNCQUFzQixHQUFHLFNBQVMsR0FBRywrQ0FBK0MsQ0FBQztpQkFDeEo7Z0JBQ0QsT0FBTyxTQUFTLEdBQUcsYUFBYSxDQUFDO2FBQ3BDO1NBQ0o7S0FDSjtJQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ1IsSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsSUFBSSxJQUFJLEVBQUU7WUFDeEMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRSxTQUFTLEdBQUcsZ0JBQWdCLEdBQUcsU0FBUyxHQUFHLCtDQUErQyxDQUFDO1NBQ2xKO1FBQ0QsT0FBTyxTQUFTLEdBQUcsYUFBYSxDQUFDO0tBQ3BDO0lBR0QsSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsSUFBSSxJQUFJLEVBQUU7UUFDeEMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRSxTQUFTLEdBQUcsVUFBVSxHQUFHLFNBQVMsR0FBRyxhQUFhLENBQUM7S0FDMUc7SUFDRCxPQUFPLFNBQVMsR0FBRyxhQUFhLENBQUM7QUFDckMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vTUFJTkJMT0NLXG47LyogZGVmaW5lIGhlcmUgdGhlIGRpc3BhdGNoIGxvZ2ljICovXG4vLy8gLS0tIFNJVCwgUFJPRCAtLS0gLy8vXG5cbi8vdGhpcyBpcyBjYWxsZWQgYnkgb3ZlcmxvYWRcbi8vYW5kIGltcG9ydGFudCBpZiBHVUkgdGVzdGluZyBpcyB1c2VkIGFzIHRoaXMgd2lsbCB0aGUgdXNlIHRoZSBmc20tZmxvd25hbWUgdGhlIGVzdCBpcyBzZW50XG4vL3RoaXMgaXMgdHJpZ2dlcmVkIGlmIHRoZSB0aW1lc3RhbXAgaW4gZXZlbnQgaXMgPiB0aGUgY29uZmlndXJlZCBydGUgZXZlbnQtbWF4LWFjY2VwdGFibGUtZGVsYXktbXN8fDMwMG1zXG4vL292ZXJsb2FkX2Rpc3BhdGNoIG5vdCB1c2VkIGluIHY1IGFueW1vcmVcbmZ1bmN0aW9uIG92ZXJsb2FkX2Rpc3BhdGNoIChldmVudCA6IGFueSApIDogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJvY2FkbWludjU6aDNpcnM6ZHJvcGV2ZW50XCI7XG4gICAgXG4gICAgbGV0IG5hbWVzcGFjZTpzdHJpbmcgPSBcIm9jYWRtaW5cIjsgXG4gICAgbmFtZXNwYWNlID0gZGlzcGF0Y2goZXZlbnQpO1xuICAgIHJldHVybiBuYW1lc3BhY2U7IFxufVxuXG4vLyBNYWluIGRpc3BhdGNoIGxvZ2ljXG5mdW5jdGlvbiBkaXNwYXRjaChldmVudCkge1xuXG4gICAgdmFyIG5hbWVzcGFjZSA9IFwib2NhZG1pbnY1XCI7XG5cblxuICAgIC8vIGFkZCB2NSBvdmVybG9hZGhhbmRsaW5nIC0gZHJvcHBpbmcgZXZlbnQgYmFzZWQgb24gb3ZlcmxvYWRlZExhdGVFdmVudC9vdmVybG9hZGVkUXVldWVMaXN0XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGV2ZW50W1wiaGVhZGVyXCJdIT1udWxsKSB7ICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2FueSBvdmVybG9hZCBldmVudCBpcyBwcmVzZW50XG4gICAgICAgICAgICAvLyAgICBcImhlYWRlclwiOiB7XG4gICAgICAgICAgICAvLyAgICAgIFwib3ZlcmxvYWRlZExhdGVFdmVudFwiOiA1MTMyMDYwMDksXG4gICAgICAgICAgICAvLyAgICAgIFwib3ZlcmxvYWRlZFF1ZXVlTGlzdFwiOiBbXG4gICAgICAgICAgICAvLyAgICAgICAgXCJxdWV1ZS1kYi9oM2lyc19DZHJHV19pbmdyZXNzXCJcbiAgICAgICAgICAgIC8vICAgICAgXVxuICAgICAgICAgICAgLy8gICAgfVxuXG4gICAgICAgICAgICAvL2Rpc2FibGUgb3ZlcmxvYWRlZExhdGVFdmVudCBhcyBpdCBpcyBhbHdheXMgdGhlcmUgZm9yIGluamVjdGVkIGV2ZW50cyBcbiAgICAgICAgICAgIC8vaWYgKGV2ZW50W1wiaGVhZGVyXCJdW1wib3ZlcmxvYWRlZExhdGVFdmVudFwiXSE9bnVsbCkge1xuICAgICAgICAgICAgLy8gICAgLy9pbmdyZXNzIGV2ZW50IGlzIGxhdGVcbiAgICAgICAgICAgIC8vICAgIHJldHVybiBcIm9jYWRtaW46aDNpcnM6ZHJvcGV2ZW50XCI7XG4gICAgICAgICAgICAvL31cbiAgICAgICAgICAgIGlmIChldmVudFtcImhlYWRlclwiXVtcIm92ZXJsb2FkZWRRdWV1ZUxpc3RcIl0hPW51bGwpIHtcbiAgICAgICAgICAgICAgICAvL2FueSBlZ3Jlc3MgcXVldWUgaXMgYWJvdmUgTExFTiBsaW1pdCBtYXgtcGVuZGluZy1tZXNzYWdlcy1wZXItcXVldWUgKGRlZmF1bHQgPSAtMSlcbiAgICAgICAgICAgICAgICAvL1wicXVldWUtZGIvaDNpcnNfQ2RyR1dfaW5ncmVzc1wiXG4gICAgICAgICAgICAgICAgaWYgKCAhKGV2ZW50W1wiaGVhZGVyXCJdW1wib3ZlcmxvYWRlZFF1ZXVlTGlzdFwiXVswXS5tYXRjaCgvXm1vbml0b3IvKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9pZiBpdCBkb2VzbnQgc3RhcnQgd2l0aCBtb25pdG9yIHRoZW4gaXQgaXMgbGlrZWx5IGFueSByZWFsLXRpbWUgdHJhZmZpYyBxdWV1ZSAuLiBidXQgbW9uaXRvciBxdWV1ZSBtdXN0IG5vdCBjYXVzZSBhIGRyb3AgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzcGFjZSArIFwiOmgzaXJzOmRyb3BldmVudFwiO1xuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7ICAgICAgIFxuXG4gICAgfVxuXG4gICAgLy91c2VkIGZvciBzdGFnaW5nIG5hbWVzcGFjZSAtIE1VU1QgTk9UIEJFIENIQU5HRURcbiAgICB0cnkgeyAgICAgICAgXG4gICAgICAgIC8vdHJhY2luZyBtaWRkbGV3YXJlIG1heSByZXR1cm4gYW4gb2JqZWN0IGNhbGxlZCBcImV2ZW50LXRyYWNpbmdcIi4gVGhpcyB3aWxsIGhhdmUgaGlnaGVyIHByaW9yaXR5IGFzIHRoZSB0cmFjaW5nIGluIHRoZSBTdGFydEhhbmRsZXIuIFRoaXMgb2JqZWN0IGlzIGRpc2FibGVkIGJ5IG1pZGRsZXdhcmUgc3RhZ2luZ1xuICAgICAgICAvL3RyYWNpbmcgbWlkZGxld2FyZSBtYXkgcmV0dXJuIGFuIGtleSBpbiByb290IHZhbGVkIFwiZXZlbnQtbGFiZWwtbWF0Y2hcIiBhbmQgaWYgVFJVRSB0aGVuIG1hdGNoZWQgaW4gdGhlIHN0YWdpbmcgbGlzdCAtPiBtb3ZlIHRvIHN0YWdpbmcgbmFtZXNwYWNlXG4gICAgICAgIC8vdHJhY2luZyBtaWRkbGV3YXJlIG1heSByZXR1cm4gYW4gb2JqZWN0IGNhbGxlZCBcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiLiBUaGlzIGhhcyBwYXJhbWV0ZXJzIHN1Y2ggYXMgdHJhY2luZ2lkIChpZD0gZWcgbXNpc2RuIHdpdGhvdXQgKyB0byB0cmFjZSkgYW5kIHRyYWNpbmdtc2cgKG1lc3NhZ2UgdHlwZSkuIEFkZGl0aW9uYWxseSBhIHBhcmFtZXRlciBpcyBhZGRlZCBpZiBhIGxpc3QgbWF0Y2ggZ2l2ZSB0cnVlL2ZhbHNlXG4gICAgICAgIGlmIChldmVudFtcImV2ZW50LWxhYmVsLW1hdGNoXCJdIT1udWxsICYmIGV2ZW50W1wiZXZlbnQtbGFiZWwtbWF0Y2hcIl09PXRydWUpIHsgICAgICAgICAgICBcbiAgICAgICAgICAgIG5hbWVzcGFjZT1cInN0YWdpbmd2NVwiO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuXG4gICAgfVxuICAgIC8vdXNlZCBmb3Igc3RhZ2luZyBuYW1lc3BhY2UgLSBNVVNUIE5PVCBCRSBDSEFOR0VEXG4gICAgXG4gICAgLy8gdGhlIGRpc3BhdGNoZXJyZXN1bHQgaXMgdXNlZCB0byBoYXZlIGEgc3RhdGlzdGNzIGluIHRoZSBmbG93IGFib3V0IHRoZSBkaXNwYXRjaGVyIHJlc3VsdCBjb2RlXG4gICAgLy8gdGhlIGRpc3BhdGNoZXJyZXN1bHQgaXMgYWRkZWQgYnkgc3RhZ2luZyBhbmQgY2FuIGJlIG1vZGlmaWVkIGhlcmUgQlVUIG9ubHkgaWYgdGhlIGV2ZW50IGlzIGNhcHR1cmVkIGJ5IFNUQVRJTkcgPT0gaW5pdGlhbCBldmVudFxuICAgIC8vIGlmIG5vdCBpbml0aWFsIGV2ZW50IHRoZW4gdGhlIGV2ZW50LWFkZGl0aW9uYWwtaW5mbyBvYmplY3QgaXMgbm90IHByZXNlbnQgYW5kIHRoZSBtb2RpZnkgd2lsbCBmYWlsIGJlbG93IGNhdXNpbmcgYW4gZGlzcGF0Y2hlciBleGNlcHRvaW4gYW5kIHBvdGVudGlhbCBsb29wIG9mIG1lc3NhZ2VzXG4gICAgLy9kaXNwYXRjaGVycmVzdWx0ID09IG5hbWVzcGFjZV9kaXNwYXRjaGVycmVzdWx0X25hbWVzcGFjZTpwcm9qZWN0OmZsb3dcblxuICAgIC8vZXZlbnQtbmFtZT1yZWFkLXNlc3Npb24tcXVldWUsIGV2ZW50LXR5cGU9ZmFrZVxuICAgIGlmIChldmVudFtcImV2ZW50LXR5cGVcIl0gPT09XCJmYWtlXCIpICB7XG4gICAgICAgIFxuICAgICAgICAvLyBkbyBOT1QgZW5hYmxlIHRoZSBiZWxvdyBhcyB0aGlzIHNvbWVob3cgZmFpbHMgZm9yIGZha2UgZXZlbnRzXG4gICAgICAgIC8vaWYgKGV2ZW50W1wiZXZlbnQtYWRkaXRpb25hbC1pbmZvXCJdW1wiZGlzcGF0Y2hlcnJlc3VsdFwiXSAhPSBudWxsKSB7IFxuICAgICAgICAvLyAgICBldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXVtcImRpc3BhdGNoZXJyZXN1bHRcIl0gPSBuYW1lc3BhY2UgKyBcIl9mYWtlZXZlbnRcIiArIG5hbWVzcGFjZSArIFwiOmgzaXJzZHJvcFwiO1xuICAgICAgICAvL31cbiAgICAgICAgLy8gZG8gTk9UIGVuYWJsZSB0aGUgYWJvdmUgYXMgdGhpcyBzb21laG93IGZhaWxzIGZvciBmYWtlIGV2ZW50c1xuICAgICAgICByZXR1cm4gbmFtZXNwYWNlICsgXCI6aDNpcnM6ZHJvcFwiO1xuICAgIH1cblxuXG4gICAgLy8gRGlzcGF0Y2ggaDNpcnMgU0lQIEludml0ZXMgJiBoM2lycyBTSVAgT3B0aW9ucyAtIGRvIGEgZmV3IGNoZWNrcyBiZWZvcmVcbiAgICB0cnkge1xuICAgICAgICBpZiAoZXZlbnQuU0lQKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIE9QVElPTlNcbiAgICAgICAgICAgICAgICBpZiAoIGV2ZW50LlNJUC5tZXNzYWdlLm1ldGhvZFswXS5tYXRjaCgvXk9QVElPTlMkLykgJiYgZXZlbnQuU0lQW1wiUi1VUklcIl0uYWRkcmVzcy51cmkudXNlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5TSVBbXCJSLVVSSVwiXS5hZGRyZXNzLnVyaS51c2VyLm1hdGNoKC9eaDNpcnNfLykpIHsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl0/LltcImRpc3BhdGNoZXJyZXN1bHRcIl0gIT0gbnVsbCkgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXVtcImRpc3BhdGNoZXJyZXN1bHRcIl0gPSBuYW1lc3BhY2UgKyBcIl9zaXBvcHRpb25cIiArIG5hbWVzcGFjZSArIFwiOmgzaXJzOmgzaXJzX0ludGVybmF0aW9uYWxSb2FtaW5nU2VydmljZV9tYWluXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZXNwYWNlICsgXCI6aDNpcnM6aDNpcnNfSW50ZXJuYXRpb25hbFJvYW1pbmdTZXJ2aWNlX21haW5cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl0/LltcImRpc3BhdGNoZXJyZXN1bHRcIl0gIT0gbnVsbCkgeyBcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl1bXCJkaXNwYXRjaGVycmVzdWx0XCJdPSBuYW1lc3BhY2UgKyBcIl9leGNlcHRpb25vcHRpb25cIiArIG5hbWVzcGFjZSArIFwiOmgzaXJzOmRyb3BcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzcGFjZSArIFwiOmgzaXJzOmRyb3BcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gSU5WSVRFIGhhcyBhcyB3ZWxsIGEgaXJzIHJvdXRlXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50W1wiU0lQXCJdW1wiUm91dGVcIl1bMF1bXCJhZGRyZXNzXCJdW1widXJpXCJdW1wiaG9zdFwiXS5tYXRjaCgvXmlycy8pKSB7ICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXSAhPSBudWxsKSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl1bXCJkaXNwYXRjaGVycmVzdWx0XCJdPSBuYW1lc3BhY2UgKyBcIl9pcnNcIiArIG5hbWVzcGFjZSArIFwiOmgzaXJzOmgzaXJzX0ludGVybmF0aW9uYWxSb2FtaW5nU2VydmljZV9tYWluXCI7IFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lc3BhY2UgKyBcIjpoM2lyczpoM2lyc19JbnRlcm5hdGlvbmFsUm9hbWluZ1NlcnZpY2VfbWFpblwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl0gIT0gbnVsbCkgeyBcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl1bXCJkaXNwYXRjaGVycmVzdWx0XCJdPSBuYW1lc3BhY2UgKyBcIl9leGNlcHRpb25yb3V0ZWhmXCIgKyBuYW1lc3BhY2UgKyBcIjpoM2lyczpoM2lyc19JbnRlcm5hdGlvbmFsUm9hbWluZ1NlcnZpY2VfbWFpblwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZXNwYWNlICsgXCI6aDNpcnM6ZHJvcFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl0gIT0gbnVsbCkgeyBcbiAgICAgICAgICAgIGV2ZW50W1wiZXZlbnQtYWRkaXRpb25hbC1pbmZvXCJdW1wiZGlzcGF0Y2hlcnJlc3VsdFwiXT0gbmFtZXNwYWNlICsgXCJfZXhjZXB0aW9uc2lwXCIgKyBuYW1lc3BhY2UgKyBcIjpoM2lyczpoM2lyc19JbnRlcm5hdGlvbmFsUm9hbWluZ1NlcnZpY2VfbWFpblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYW1lc3BhY2UgKyBcIjpoM2lyczpkcm9wXCI7ICAgICAgICBcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoIGV2ZW50W1wiZXZlbnRcIl1bXCJjYW1lbFwiXSApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy9jYW1lbFxuICAgICAgICAgICAgICAgIGlmIChldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXSAhPSBudWxsKSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl1bXCJkaXNwYXRjaGVycmVzdWx0XCJdPSBuYW1lc3BhY2UgKyBcIl9pcnNcIiArIG5hbWVzcGFjZSArIFwiOmgzaXJzOmgzaXJzX0ludGVybmF0aW9uYWxSb2FtaW5nU2VydmljZV9tYWluXCI7IFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lc3BhY2UgKyBcIjpoM2lyczpoM2lyc19JbnRlcm5hdGlvbmFsUm9hbWluZ1NlcnZpY2VfbWFpblwiO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXSAhPSBudWxsKSB7IFxuICAgICAgICAgICAgICAgICAgICBldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXVtcImRpc3BhdGNoZXJyZXN1bHRcIl09IG5hbWVzcGFjZSArIFwiX2V4Y2VwdGlvbnJvdXRlY2FtZWxcIiArIG5hbWVzcGFjZSArIFwiOmgzaXJzOmgzaXJzX0ludGVybmF0aW9uYWxSb2FtaW5nU2VydmljZV9tYWluXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuYW1lc3BhY2UgKyBcIjpoM2lyczpkcm9wXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXSAhPSBudWxsKSB7IFxuICAgICAgICAgICAgZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl1bXCJkaXNwYXRjaGVycmVzdWx0XCJdPSBuYW1lc3BhY2UgKyBcIl9leGNlcHRpb25zY2FwXCIgKyBuYW1lc3BhY2UgKyBcIjpoM2lyczpoM2lyc19JbnRlcm5hdGlvbmFsUm9hbWluZ1NlcnZpY2VfbWFpblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYW1lc3BhY2UgKyBcIjpoM2lyczpkcm9wXCI7ICAgICAgICBcbiAgICB9ICAgICAgICBcblxuICAgIC8vIERlZmF1bHRcbiAgICBpZiAoZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl0gIT0gbnVsbCkgeyBcbiAgICAgICAgZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl1bXCJkaXNwYXRjaGVycmVzdWx0XCJdPSBuYW1lc3BhY2UgKyBcIl9kZWZhdWx0XCIgKyBuYW1lc3BhY2UgKyBcIjpoM2lyczpkcm9wXCI7XG4gICAgfVxuICAgIHJldHVybiBuYW1lc3BhY2UgKyBcIjpoM2lyczpkcm9wXCI7XG59XG4iXX0=