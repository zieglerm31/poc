"use strict";
function formatDate(date) {
    var ret = date.getFullYear().toString() + ("00" + (date.getMonth() + 1).toString()).slice(-2) + ("00" + (date.getDate()).toString()).slice(-2);
    return ret;
}
function formatTime(date) {
    var ret = ("00" + date.getHours().toString()).slice(-2) + ("00" + date.getMinutes().toString()).slice(-2) + ("00" + date.getSeconds().toString()).slice(-2);
    return ret;
}
function sleepfunction(date) {
    java.lang.Thread.sleep(999);
    return "success";
}
function prettytrace(session, event, localParams) {
    var log = session.log;
    var now = new Date();
    var logDate = formatDate(now);
    var logTime = formatTime(now);
    try {
        if (session["fsm-trace-level"] > 0) {
            if (event["event-additional-info"] != null) {
                session["trace-skey"] = event["event-additional-info"]["tracingid"];
                session["trace-type"] = logDate + "-" + logTime + "_" + event["event-additional-info"]["tracingmsg"];
            }
            else {
                session["trace-type"] = logDate + "-" + logTime + "_MissingStagingInfo";
            }
            if (session["trace-type"] == "random") {
                session["fsm-trace-level"] = 2;
            }
            else {
                session["fsm-trace-level"] = 2;
            }
        }
    }
    catch (e) {
        log.error("get_checkHF:Error adding trace details: {}", e);
    }
}
function saveevent(session, event, localParams) {
    session.s_savedevent = event;
    var now = new Date();
    var logDate = formatDate(now);
    var logTime = formatTime(now);
    try {
        if (session["fsm-trace-level"] > 0) {
            if (event["event-additional-info"] != null) {
                session["trace-skey"] = event["event-additional-info"]["tracingid"];
                session["trace-type"] = logDate + "-" + logTime + "_" + event["event-additional-info"]["tracingmsg"];
            }
            else {
                session["trace-type"] = logDate + "-" + logTime + "_MissingStagingInfo";
            }
            if (session["trace-type"] == "random") {
                session["fsm-trace-level"] = 2;
            }
            else {
                session["fsm-trace-level"] = 2;
            }
        }
    }
    catch (e) {
        log.error("get_checkHF:Error adding trace details: {}", e);
    }
}
;
;
function get_checkIDP(session, event, localParams) {
    var ret;
    var log = session.log;
    ret = ret || {};
    ret.resultCode = "Success";
    var now = new Date();
    var logDate = formatDate(now);
    var logTime = formatTime(now);
    try {
        if (session["fsm-trace-level"] > 0) {
            if (event["event-additional-info"] != null) {
                session["trace-skey"] = event["event-additional-info"]["tracingid"];
                session["trace-type"] = logDate + "-" + logTime + "_" + event["event-additional-info"]["tracingmsg"];
            }
            else {
                session["trace-type"] = logDate + "-" + logTime + "_MissingStagingInfo";
            }
            if (session["trace-type"] == "random") {
                session["fsm-trace-level"] = 2;
            }
            else {
                session["fsm-trace-level"] = 2;
            }
        }
    }
    catch (e) {
        log.error("get_checkHF:Error adding trace details: {}", e);
    }
    session.s_IDP = event;
    session.s_CalledPartyNr = session.s_IDP.event.callStart.contact.user;
    session.s_CallingPartyNr = session.s_IDP.event.callStart.leg.user;
    session.s_callReferenceNumber = session.s_IDP.event.camel.callReferenceNumber;
    session.s_callAttemptTime = session.s_IDP.event.camel.common.callAttemptTime;
    session.s_mscAddress = session.s_IDP.event.camel.mscAddress.user;
    if (session.s_IDP.event.camel.vlrAddress) {
        session.s_vlrAddress = session.s_IDP.event.camel.vlrAddress.user;
    }
    else {
        session.s_vlrAddress = session.s_mscAddress;
    }
    if (session.s_CalledPartyNr.match(/^43/)) {
        session.s_callInAustria = "Y";
    }
    var l_vlrAddress = session.s_vlrAddress;
    session.s_CC_prefix = l_vlrAddress.substr(0, 2);
    session.s_MSCRoamingDN = session.s_IDP.event.camel.sccpCgPa.user;
    if (session.s_IDP.event.camel.eventTypeBCSM == 2) {
        if (session.s_IDP.event.camel.redirectReason != null) {
            session.s_CallType = "CFMOC_IDP2";
            session.s_CCRRoleOfNode = 2;
            return ret;
        }
        else {
            session.s_CallType = "MOC_IDP2";
            session.s_CCRRoleOfNode = 0;
            return ret;
        }
    }
    else if (session.s_IDP.event.camel.eventTypeBCSM == 3) {
        if (session.s_IDP.event.camel.redirectReason != null) {
            session.s_CallType = "CFMOC_IDP3";
            session.s_CCRRoleOfNode = 2;
            return ret;
        }
        else {
            session.s_CallType = "MOC_IDP3";
            session.s_CCRRoleOfNode = 0;
            return ret;
        }
    }
    else if (session.s_IDP.event.camel.eventTypeBCSM == 12) {
        session.s_CallType = "MTC_IDP12";
        session.s_CCRRoleOfNode = 1;
        return ret;
    }
    else {
        return ret.resultCode = "No_IDP";
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFHQSxTQUFTLFVBQVUsQ0FBQyxJQUFXO0lBQzNCLElBQUksR0FBRyxHQUFhLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNySixPQUFPLEdBQUcsQ0FBQztBQUNmLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxJQUFXO0lBQzNCLElBQUksR0FBRyxHQUFhLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hLLE9BQU8sR0FBRyxDQUFDO0FBQ2YsQ0FBQztBQUdELFNBQVMsYUFBYSxDQUFDLElBQVc7SUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRTVCLE9BQU8sU0FBUyxDQUFDO0FBQ3JCLENBQUM7QUFFRCxTQUFTLFdB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R0FBQyxRQUFRLENBQUM7S0FFaEM7QUFJTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKiogbGliIGNvZGUgKi9cblxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlIDogRGF0ZSkgOiBzdHJpbmcge1xuICAgIGxldCByZXQgOiBzdHJpbmcgID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKyAoXCIwMFwiICsgKGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpKS5zbGljZSgtMikgKyAoXCIwMFwiKyhkYXRlLmdldERhdGUoKSkudG9TdHJpbmcoKSkuc2xpY2UoLTIpO1xuICAgIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFRpbWUoZGF0ZSA6IERhdGUpIDogc3RyaW5nIHtcbiAgICBsZXQgcmV0IDogc3RyaW5nICA9IChcIjAwXCIrZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkpLnNsaWNlKC0yKSArIChcIjAwXCIrZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSkuc2xpY2UoLTIpICsgKFwiMDBcIitkYXRlLmdldFNlY29uZHMoKS50b1N0cmluZygpKS5zbGljZSgtMik7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuXG5mdW5jdGlvbiBzbGVlcGZ1bmN0aW9uKGRhdGUgOiBEYXRlKSA6IHN0cmluZyB7XG4gICAgamF2YS5sYW5nLlRocmVhZC5zbGVlcCg5OTkpO1xuXG4gICAgcmV0dXJuIFwic3VjY2Vzc1wiO1xufVxuXG5mdW5jdGlvbiBwcmV0dHl0cmFjZShzZXNzaW9uOmFueSxldmVudDphbnksbG9jYWxQYXJhbXM6YW55KTogYW55IHtcbiAgICBsZXQgbG9nIDogYW55ID0gc2Vzc2lvbi5sb2c7XG4gICAgXG4gICAgLy9zZXQgcHJldHR5IHRyYWNpbmcgaW5mby4gVGhpcyBzaGFsbCBiZSBpbiB0aGUgZmlyc3QgbGlicmFyeSBhZnRlciBtYWluXG4gICAgbGV0IG5vdyA6IERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGxldCBsb2dEYXRlIDogc3RyaW5nID0gZm9ybWF0RGF0ZShub3cpO1xuICAgIGxldCBsb2dUaW1lIDogc3RyaW5nID0gZm9ybWF0VGltZShub3cpO1xuICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbltcImZzbS10cmFjZS1sZXZlbFwiXSA+IDApIHtcbiAgICAgICAgICAgICAgICAvL29ubHkgaW5jcmVhc2UgdHJhY2UgaWYgZW5hYmxlZCBieSBTdGFydCBoYW5kbGVyIChyYW5kb20gb3IgbGlzdCBiYXNlZClcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl0hPW51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbltcInRyYWNlLXNrZXlcIl0gPSBldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXVtcInRyYWNpbmdpZFwiXTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbltcInRyYWNlLXR5cGVcIl0gPSBsb2dEYXRlK1wiLVwiKyBsb2dUaW1lK1wiX1wiK2V2ZW50W1wiZXZlbnQtYWRkaXRpb25hbC1pbmZvXCJdW1widHJhY2luZ21zZ1wiXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbltcInRyYWNlLXR5cGVcIl0gPSBsb2dEYXRlK1wiLVwiKyBsb2dUaW1lK1wiX01pc3NpbmdTdGFnaW5nSW5mb1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbltcInRyYWNlLXR5cGVcIl0gPT0gXCJyYW5kb21cIikge1xuICAgICAgICAgICAgICAgICAgICAvL3RoaXMgaXMgYSByYW5kb20gdHJhY2UgLSBzZXQgdGhlIHZhbHVlIGZyb20gZGVmYXVsdCAxIHRvIDIuIG5vdCBwb3NzaWJsZSB0byBnZXQgaXQgZnJvbSBVSVIgYXMgdGhpcyBpcyBsYXRlciBpbiB0aGUgZmxvdy4gbWF5YmUgY291bGQgY2hhbmdlIGluIGxhdGVyIGJ1dCBub3QgY29uc2lkZXJlZCB5ZXRcbiAgICAgICAgICAgICAgICAgICAgLy9cImZzbS10cmFjZS1sZXZlbFwiIGZpZWxkIGluIHRoZSBzZXNzaW9uIHRvIGVpdGhlciAwIChiYXNpYyksIDEgKGludGVybWVkaWF0ZSkgb3IgMiAoaGlnaCk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25bXCJmc20tdHJhY2UtbGV2ZWxcIl0gPSAyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25bXCJmc20tdHJhY2UtbGV2ZWxcIl0gPSAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZy5lcnJvcihcImdldF9jaGVja0hGOkVycm9yIGFkZGluZyB0cmFjZSBkZXRhaWxzOiB7fVwiLGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2F2ZWV2ZW50KHNlc3Npb246YW55LGV2ZW50OmFueSxsb2NhbFBhcmFtczphbnkpOiBhbnkge1xuICAgIHNlc3Npb24uc19zYXZlZGV2ZW50ID0gZXZlbnQ7XG5cbiAgICAvLyBhcyB0aGlzIGlzIHVzZWQgZm9yIFNJUC5PUFRJT05TXG4gICAgLy9zZXQgcHJldHR5IHRyYWNpbmcgaW5mby4gVGhpcyBzaGFsbCBiZSBpbiB0aGUgZmlyc3QgbGlicmFyeSBhZnRlciBtYWluXG4gICAgbGV0IG5vdyA6IERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGxldCBsb2dEYXRlIDogc3RyaW5nID0gZm9ybWF0RGF0ZShub3cpO1xuICAgIGxldCBsb2dUaW1lIDogc3RyaW5nID0gZm9ybWF0VGltZShub3cpO1xuICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbltcImZzbS10cmFjZS1sZXZlbFwiXSA+IDApIHtcbiAgICAgICAgICAgICAgICAvL29ubHkgaW5jcmVhc2UgdHJhY2UgaWYgZW5hYmxlZCBieSBTdGFydCBoYW5kbGVyIChyYW5kb20gb3IgbGlzdCBiYXNlZClcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl0hPW51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbltcInRyYWNlLXNrZXlcIl0gPSBldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXVtcInRyYWNpbmdpZFwiXTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbltcInRyYWNlLXR5cGVcIl0gPSBsb2dEYXRlK1wiLVwiKyBsb2dUaW1lK1wiX1wiK2V2ZW50W1wiZXZlbnQtYWRkaXRpb25hbC1pbmZvXCJdW1widHJhY2luZ21zZ1wiXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbltcInRyYWNlLXR5cGVcIl0gPSBsb2dEYXRlK1wiLVwiKyBsb2dUaW1lK1wiX01pc3NpbmdTdGFnaW5nSW5mb1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbltcInRyYWNlLXR5cGVcIl0gPT0gXCJyYW5kb21cIikge1xuICAgICAgICAgICAgICAgICAgICAvL3RoaXMgaXMgYSByYW5kb20gdHJhY2UgLSBzZXQgdGhlIHZhbHVlIGZyb20gZGVmYXVsdCAxIHRvIDIuIG5vdCBwb3NzaWJsZSB0byBnZXQgaXQgZnJvbSBVSVIgYXMgdGhpcyBpcyBsYXRlciBpbiB0aGUgZmxvdy4gbWF5YmUgY291bGQgY2hhbmdlIGluIGxhdGVyIGJ1dCBub3QgY29uc2lkZXJlZCB5ZXRcbiAgICAgICAgICAgICAgICAgICAgLy9cImZzbS10cmFjZS1sZXZlbFwiIGZpZWxkIGluIHRoZSBzZXNzaW9uIHRvIGVpdGhlciAwIChiYXNpYyksIDEgKGludGVybWVkaWF0ZSkgb3IgMiAoaGlnaCk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25bXCJmc20tdHJhY2UtbGV2ZWxcIl0gPSAyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25bXCJmc20tdHJhY2UtbGV2ZWxcIl0gPSAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZy5lcnJvcihcImdldF9jaGVja0hGOkVycm9yIGFkZGluZyB0cmFjZSBkZXRhaWxzOiB7fVwiLGUpO1xuICAgIH0gICAgXG59XG5cbjsvL01BSU5CTE9DS1xuO25hbWVzcGFjZSBPQ0NQQ0FQeyAgZXhwb3J0IGludGVyZmFjZSBBZGRyZXNzIHtcbiAgICBzY2hlbWU6IHN0cmluZyAsXG4gICAgdXNlcjogc3RyaW5nICxcbiAgICBwYXJhbXMgOnthbnl9LFxuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBDYWxsIHtcbiAgICBsZWdzOltBZGRyZXNzXSxcbiAgICBzdGF0ZTogc3RyaW5nXG4gIH1cbiAgZXhwb3J0IGludGVyZmFjZSBDaGFyZ2luZ1VuaXQge1xuICAgIHRhcmlmZlRpbWVDaGFuZ2U6bnVtYmVyICxcbiAgICBhbW91bnQ6bnVtYmVyICxcbiAgICB1bml0OiBzdHJpbmcgLFxuICAgIHRhcmlmZkNoYW5nZVVzYWdlOnN0cmluZyAsXG4gICAgZGlyZWN0aW9uOiBzdHJpbmcgLFxuICAgIHJlcG9ydGluZ1JlYXNvbjogc3RyaW5nXG4gIH1cbiAgZXhwb3J0IGludGVyZmFjZSBDaGFyZ2luZ1BhcmFtU2V0IHtcbiAgICB1c2VkVW5pdHM6W0NoYXJnaW5nVW5pdF1cbiAgfVxuICBleHBvcnQgaW50ZXJmYWNlIENhbWVsIHtcbiAgICBzY2NwQ2RQYTogQWRkcmVzcyAsXG4gICAgY2dQYUNhdGVnb3J5OiBudW1iZXIgLFxuICAgIGNhbGxSZWZlcmVuY2VOdW1iZXI6IHN0cmluZyAsXG4gICAgaGlnaExheWVyQ2hhcmFjdGVyaXN0aWNzOiBudW1iZXIsXG4gICAgY2hhcmdpbmc6IENoYXJnaW5nUGFyYW1TZXQsXG4gICAgZ3NtRndkUGVuZGluZzogYm9vbGVhbixcbiAgICBldmVudFR5cGVCQ1NNOm51bWJlciAsXG4gICAgbXNjQWRkcmVzczpBZGRyZXNzICxcbiAgICB2bHJBZGRyZXNzOiBBZGRyZXNzICxcbiAgICBzY2NwQ2dQYTpBZGRyZXNzICxcbiAgICBiZWFyZXJTZXJ2aWNlQ29kZTpudW1iZXIsXG4gICAgbG9jYXRpb25OdW1iZXI6IEFkZHJlc3MsXG4gICAgbmV0d29ya1Byb3RvY29sOiBzdHJpbmdcbiAgfVxuICBleHBvcnQgaW50ZXJmYWNlIEV2ZW50IHtcbiAgICBjYW1lbCA6IENhbWVsLFxuICAgIG5hbWUgOiBzdHJpbmcgLFxuICAgIGNhbGxTdGFydCA6IENhbGxTdGFydFBhcmFtLFxuICAgIGlkIDogbnVtYmVyXG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIENhbGxTdGFydFBhcmFtIHtcbiAgICBjb250YWN0OkFkZHJlc3MsXG4gICAgY2F1c2U6IHN0cmluZyAsXG4gICAgbGVnOkFkZHJlc3NcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2FsbFN0YXJ0RXZlbnQge1xuICAgIGNhbGxpZCA6IHN0cmluZyAsXG4gICAgY2FsbCA6IENhbGwsXG4gICAgYXMgOiBzdHJpbmcgLFxuICAgIGV2ZW50dGltZSA6IG51bWJlciAsXG4gICAgc3RhcnR0aW1lIDogbnVtYmVyICxcbiAgICBldmVudCA6IEV2ZW50ICxcbiAgICBxdWV1ZSA6IHN0cmluZ1xuICB9XG5cbn1cblxuaW50ZXJmYWNlIFJlc3VsdENvZGUge1xuICAgIHJlc3VsdENvZGU6c3RyaW5nIDtcbn1cblxuZnVuY3Rpb24gZ2V0X2NoZWNrSURQKHNlc3Npb246YW55LGV2ZW50OmFueSxsb2NhbFBhcmFtczphbnkpOiBhbnkge1xuICAgIFxuICAgIGxldCByZXQ6IFJlc3VsdENvZGU7XG4gICAgbGV0IGxvZyA6IGFueSA9IHNlc3Npb24ubG9nO1xuICAgIHJldCA9IHJldCB8fCB7fTtcbiAgICByZXQucmVzdWx0Q29kZT1cIlN1Y2Nlc3NcIjtcblxuICAgIC8vYWRkIHByZXR0eXRyYWNlIGRpcmVjdGx5IGludG8gdGhlIGZpcnN0IGZ1bmN0aW9uXG4gICAgLy90aGlzIHNldHMgdGhlIHBhcmFtZXRlcnMgdGhhdCBzaG93IHVwIGF0IHRoZSB0cmFjZSBndWlcbiAgICBsZXQgbm93IDogRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgbGV0IGxvZ0RhdGUgOiBzdHJpbmcgPSBmb3JtYXREYXRlKG5vdyk7XG4gICAgbGV0IGxvZ1RpbWUgOiBzdHJpbmcgPSBmb3JtYXRUaW1lKG5vdyk7XG4gICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uW1wiZnNtLXRyYWNlLWxldmVsXCJdID4gMCkge1xuICAgICAgICAgICAgICAgIC8vb25seSBpbmNyZWFzZSB0cmFjZSBpZiBlbmFibGVkIGJ5IFN0YXJ0IGhhbmRsZXIgKHJhbmRvbSBvciBsaXN0IGJhc2VkKVxuICAgICAgICAgICAgICAgIGlmIChldmVudFtcImV2ZW50LWFkZGl0aW9uYWwtaW5mb1wiXSE9bnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uW1widHJhY2Utc2tleVwiXSA9IGV2ZW50W1wiZXZlbnQtYWRkaXRpb25hbC1pbmZvXCJdW1widHJhY2luZ2lkXCJdO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uW1widHJhY2UtdHlwZVwiXSA9IGxvZ0RhdGUrXCItXCIrIGxvZ1RpbWUrXCJfXCIrZXZlbnRbXCJldmVudC1hZGRpdGlvbmFsLWluZm9cIl1bXCJ0cmFjaW5nbXNnXCJdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSAge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uW1widHJhY2UtdHlwZVwiXSA9IGxvZ0RhdGUrXCItXCIrIGxvZ1RpbWUrXCJfTWlzc2luZ1N0YWdpbmdJbmZvXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uW1widHJhY2UtdHlwZVwiXSA9PSBcInJhbmRvbVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcyBpcyBhIHJhbmRvbSB0cmFjZSAtIHNldCB0aGUgdmFsdWUgZnJvbSBkZWZhdWx0IDEgdG8gMi4gbm90IHBvc3NpYmxlIHRvIGdldCBpdCBmcm9tIFVJUiBhcyB0aGlzIGlzIGxhdGVyIGluIHRoZSBmbG93LiBtYXliZSBjb3VsZCBjaGFuZ2UgaW4gbGF0ZXIgYnV0IG5vdCBjb25zaWRlcmVkIHlldFxuICAgICAgICAgICAgICAgICAgICAvL1wiZnNtLXRyYWNlLWxldmVsXCIgZmllbGQgaW4gdGhlIHNlc3Npb24gdG8gZWl0aGVyIDAgKGJhc2ljKSwgMSAoaW50ZXJtZWRpYXRlKSBvciAyIChoaWdoKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbltcImZzbS10cmFjZS1sZXZlbFwiXSA9IDI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbltcImZzbS10cmFjZS1sZXZlbFwiXSA9IDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nLmVycm9yKFwiZ2V0X2NoZWNrSEY6RXJyb3IgYWRkaW5nIHRyYWNlIGRldGFpbHM6IHt9XCIsZSk7XG4gICAgfVxuICAgIC8vZW5kIHByZXR0eXRyYWNlXG5cbiAgICBzZXNzaW9uLnNfSURQID0gZXZlbnQ7XG4gICAgc2Vzc2lvbi5zX0NhbGxlZFBhcnR5TnIgPSBzZXNzaW9uLnNfSURQLmV2ZW50LmNhbGxTdGFydC5jb250YWN0LnVzZXI7XG4gICAgc2Vzc2lvbi5zX0NhbGxpbmdQYXJ0eU5yID0gc2Vzc2lvbi5zX0lEUC5ldmVudC5jYWxsU3RhcnQubGVnLnVzZXI7XG4gICAgc2Vzc2lvbi5zX2NhbGxSZWZlcmVuY2VOdW1iZXIgPSBzZXNzaW9uLnNfSURQLmV2ZW50LmNhbWVsLmNhbGxSZWZlcmVuY2VOdW1iZXI7XG4gICAgc2Vzc2lvbi5zX2NhbGxBdHRlbXB0VGltZSA9IHNlc3Npb24uc19JRFAuZXZlbnQuY2FtZWwuY29tbW9uLmNhbGxBdHRlbXB0VGltZTtcbiAgICBzZXNzaW9uLnNfbXNjQWRkcmVzcyA9IHNlc3Npb24uc19JRFAuZXZlbnQuY2FtZWwubXNjQWRkcmVzcy51c2VyO1xuXG4gICAgLy9JbiBjYXNlIG9mIENGVSB2bHJBZGRyZXNzIGlzIG5vdCBleGlzdGluZyBpbiBDQVAgSURQXG4gICAgaWYgKHNlc3Npb24uc19JRFAuZXZlbnQuY2FtZWwudmxyQWRkcmVzcykge1xuXG4gICAgICBzZXNzaW9uLnNfdmxyQWRkcmVzcyA9IHNlc3Npb24uc19JRFAuZXZlbnQuY2FtZWwudmxyQWRkcmVzcy51c2VyO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgc2Vzc2lvbi5zX3ZsckFkZHJlc3MgPSBzZXNzaW9uLnNfbXNjQWRkcmVzcztcblxuICAgIH1cblxuICAgIGlmIChzZXNzaW9uLnNfQ2FsbGVkUGFydHlOci5tYXRjaCgvXjQzLykpe1xuXG4gICAgICAgIHNlc3Npb24uc19jYWxsSW5BdXN0cmlhID0gXCJZXCI7XG4gICAgfVxuICAgIFxuICAgIC8vRGV0ZXJtaW5lIENvdW50cnkgQ29kZSBmb3IgbnVtYmVyIE5vcm1hbGl6YXRpb25cbiAgICBsZXQgbF92bHJBZGRyZXNzIDogc3RyaW5nID0gc2Vzc2lvbi5zX3ZsckFkZHJlc3M7XG4gICAgLy8gVmlzaXRpbmcgQ291bnRyeSBDb2RlIFByZWZpeFxuICAgIHNlc3Npb24uc19DQ19wcmVmaXggPSBsX3ZsckFkZHJlc3Muc3Vic3RyKDAsMik7XG5cbiAgICAvL0hvbWVDb3VudHJ5Q29kZSBmb3Igbm9ybWFsaXphdGlvblxuICAgIC8vUXVpY2sgd29ya2Fyb3VuZCwgaGFzIHRvIGJlIHJlcGxhY2VkIGJ5IGJlc3QgbWF0Y2ggdmlhIExEQVAgc2VhcmNoIGZvciBtc2Nyb2FtaW5nIHRhYmxlXG4gICAgLy9zZXNzaW9uLnNfTm9ybV9wcmVmaXggPSBzZXNzaW9uLnNfSURQLmV2ZW50LmNhbWVsLnNjY3BDZFBhLnVzZXIuc3Vic3RyKDAsMik7IC8vIEV2ZXJ5IFNlcnZpY2Uvc3Vic2NyaWJlciBoYXMgaXRzIG9uIHNjY3AgY2FsbGVkIEdUIGUuZy46IENNSSBzdGFydHMgd2l0aCAzOSwgSDNBIHN0YXJ0cyB3aXRoIDQzXG4gICAgLy9zZXNzaW9uLnNfTm9ybV9wcmVmaXggPSBcIjM5XCI7IC8vIGZvciBDTUkgc3Vic2NyaWJlclxuXG4gICAgLy9HZXQgVmlzaXRlZCBMb2NhdGlvbiBSZWdpc3RlciAod2hlcmUgc3Vic2NyaWJlciBpcyByb2FtaW5nKVxuICAgIHNlc3Npb24uc19NU0NSb2FtaW5nRE4gPSBzZXNzaW9uLnNfSURQLmV2ZW50LmNhbWVsLnNjY3BDZ1BhLnVzZXI7XG5cblxuICAgIC8vRGVmaW5lIENhbGxUeXBlIChNT0MsTVRDLENGTU9DKSBiYXNlZCBvbiBwYXJhbWV0ZXJzIGluIElEUFxuXG4gICAgaWYgKHNlc3Npb24uc19JRFAuZXZlbnQuY2FtZWwuZXZlbnRUeXBlQkNTTT09Mikge1xuXG4gICAgICBpZiAoc2Vzc2lvbi5zX0lEUC5ldmVudC5jYW1lbC5yZWRpcmVjdFJlYXNvbiAhPSBudWxsKSB7XG5cbiAgICAgICAgc2Vzc2lvbi5zX0NhbGxUeXBlID0gXCJDRk1PQ19JRFAyXCI7XG4gICAgICAgIHNlc3Npb24uc19DQ1JSb2xlT2ZOb2RlID0gMjsgICBcbiAgICAgICAgcmV0dXJuIHJldDtcblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBzZXNzaW9uLnNfQ2FsbFR5cGUgPSBcIk1PQ19JRFAyXCJcbiAgICAgICAgc2Vzc2lvbi5zX0NDUlJvbGVPZk5vZGUgPSAwO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChzZXNzaW9uLnNfSURQLmV2ZW50LmNhbWVsLmV2ZW50VHlwZUJDU009PTMpIHtcblxuICAgICAgaWYgKHNlc3Npb24uc19JRFAuZXZlbnQuY2FtZWwucmVkaXJlY3RSZWFzb24gIT0gbnVsbCkge1xuXG4gICAgICAgIHNlc3Npb24uc19DYWxsVHlwZSA9IFwiQ0ZNT0NfSURQM1wiO1xuICAgICAgICBzZXNzaW9uLnNfQ0NSUm9sZU9mTm9kZSA9IDI7XG4gICAgICAgIHJldHVybiByZXQ7XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgc2Vzc2lvbi5zX0NhbGxUeXBlID0gXCJNT0NfSURQM1wiXG4gICAgICAgIHNlc3Npb24uc19DQ1JSb2xlT2ZOb2RlID0gMDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoc2Vzc2lvbi5zX0lEUC5ldmVudC5jYW1lbC5ldmVudFR5cGVCQ1NNPT0xMikge1xuXG4gICAgICBzZXNzaW9uLnNfQ2FsbFR5cGUgPSBcIk1UQ19JRFAxMlwiXG4gICAgICBzZXNzaW9uLnNfQ0NSUm9sZU9mTm9kZSA9IDE7XG4gICAgICByZXR1cm4gcmV0O1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgcmV0dXJuIHJldC5yZXN1bHRDb2RlPVwiTm9fSURQXCI7XG5cbiAgICB9XG5cbiAgICAvL2xvZy5kZWJ1ZyhcIk1hemktMSA6IHt9XCIsIHNlc3Npb24uc19DYWxsaW5nUGFydHlOcik7XG5cbn1cbiJdfQ==