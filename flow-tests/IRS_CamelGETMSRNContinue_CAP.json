{"name":"IRS_CamelGETMSRNContinue_CAP","steps":[{"type":"write","fn":"\n/**\n * Here you can change the event before it is sent using also the state accumulated so far.\n * @param state {Object} state structure, contains at least field session; you can add to it to propagate state from test step to test step\n * @param event {Object} the event to be sent.\n * @return {Object} the event to be sent\n */\nfunction pre_process(state,event){\n  // it does nothing, it is up to you to add some meaningful actions; most likely you want to change the event before being sent\n  // the application adds session field to event automatically, you don't need to add it\n  return event;\n}\n","event":{"event-name":"callStart.NONE","event-label":"h3irs_staging","call":{"legs":[{"name":null,"address":{"scheme":"tel","user":"436608795113","parameters":{"presentation":"0","screening":"1","number-incomplete-ind":"0","network-context":"Q763.4.1"}}},{"name":null,"address":{"scheme":"tel","user":"43800303256","parameters":{"network-context":"TS24008.1.1"}}}],"state":"START"},"as":"tt-b52-vtas3-seese-0003_3","event-additional-info":{"tracingmsg":"IRSbyMOlegUser","tracinglist":"h3irs_staging","dispatcherresult":"ocadmin_irsocadminv5:h3irs:h3irs_InternationalRoamingService_main","tracingid":"436608795113","traceIndented":false},"event":{"name":"callStart","callStart":{"cause":"NONE","contact":{"scheme":"tel","user":"43800303256","parameters":{"network-context":"TS24008.1.1"}},"leg":{"scheme":"tel","user":"436608795113","parameters":{"presentation":"0","screening":"1","number-incomplete-ind":"0","network-context":"Q763.4.1"}}},"id":0,"camel":{"networkProtocol":"CAMEL2","locationInformation":"cgid:22210f4e733ebd","charging":{"usedUnits":[{"tariffTimeChange":0,"amount":0,"unit":"TIME_MILLISECONDS","tariffChangeUsage":"NOT_APPLICABLE","direction":"NOT_APPLICABLE","reportingReason":null}]},"gsmFwdPending":false,"vlrAddress":{"scheme":"tel","user":"393492000093","parameters":{"network-context":"TS29002.1.1"}},"cs":{"lastNetworkEvent":2,"tcapEndMode":"PAYLOAD_TC_END","imsi":"232056317208974","disconnectedFlag":false,"extnTeleServiceCode":"11","rawBearerCapability":"8090A3"},"cgPaCategory":10,"sccpCdPa":{"scheme":"gt","user":"436990081523","parameters":{"gt-ind":"4","gt-trans-type":"0","network-context":"Q713.4.1"}},"mscAddress":{"scheme":"tel","user":"393492000093","parameters":{"network-context":"TS29002.1.1"}},"common":{"networkTimeZoneOffSet":0,"callAttemptTime":1719301480903,"networkCallType":"ORIGINATING","mediaType":"AUDIO","callReleaseTime":0,"serviceKey":"20","connectionTimeout":-1,"callConnectedTime":0},"locationNumber":{"scheme":"tel","user":"393492000093","parameters":{"internal-net-number-ind":"1","network-context":"Q763.4.1"}},"sccpCgPa":{"scheme":"gt","user":"393492000093","parameters":{"gt-ind":"4","gt-trans-type":"0","network-context":"Q713.4.1"}},"bearerServiceCode":-1,"eventTypeBCSM":2,"highLayerCharacteristics":37249,"callReferenceNumber":"401E70170695BD"}},"event-label-match":false,"callid":"tt-b52-vtas3-seese-0003_3-1719301480904-CALL-1-AppSess-202","event-type":"camel"},"original-event":{"event-name":"callStart.NONE","event-label":"h3irs_staging","call":{"legs":[{"name":null,"address":{"scheme":"tel","user":"436608795113","parameters":{"presentation":"0","screening":"1","number-incomplete-ind":"0","network-context":"Q763.4.1"}}},{"name":null,"address":{"scheme":"tel","user":"43800303256","parameters":{"network-context":"TS24008.1.1"}}}],"state":"START"},"as":"tt-b52-vtas3-seese-0003_3","event-additional-info":{"tracingmsg":"IRSbyMOlegUser","tracinglist":"h3irs_staging","dispatcherresult":"ocadmin_irsocadminv5:h3irs:h3irs_InternationalRoamingService_main","tracingid":"436608795113","traceIndented":false},"event":{"name":"callStart","callStart":{"cause":"NONE","contact":{"scheme":"tel","user":"43800303256","parameters":{"network-context":"TS24008.1.1"}},"leg":{"scheme":"tel","user":"436608795113","parameters":{"presentation":"0","screening":"1","number-incomplete-ind":"0","network-context":"Q763.4.1"}}},"id":0,"camel":{"networkProtocol":"CAMEL2","locationInformation":"cgid:22210f4e733ebd","charging":{"usedUnits":[{"tariffTimeChange":0,"amount":0,"unit":"TIME_MILLISECONDS","tariffChangeUsage":"NOT_APPLICABLE","direction":"NOT_APPLICABLE","reportingReason":null}]},"gsmFwdPending":false,"vlrAddress":{"scheme":"tel","user":"393492000093","parameters":{"network-context":"TS29002.1.1"}},"cs":{"lastNetworkEvent":2,"tcapEndMode":"PAYLOAD_TC_END","imsi":"232056317208974","disconnectedFlag":false,"extnTeleServiceCode":"11","rawBearerCapability":"8090A3"},"cgPaCategory":10,"sccpCdPa":{"scheme":"gt","user":"436990081523","parameters":{"gt-ind":"4","gt-trans-type":"0","network-context":"Q713.4.1"}},"mscAddress":{"scheme":"tel","user":"393492000093","parameters":{"network-context":"TS29002.1.1"}},"common":{"networkTimeZoneOffSet":0,"callAttemptTime":1719301480903,"networkCallType":"ORIGINATING","mediaType":"AUDIO","callReleaseTime":0,"serviceKey":"20","connectionTimeout":-1,"callConnectedTime":0},"locationNumber":{"scheme":"tel","user":"393492000093","parameters":{"internal-net-number-ind":"1","network-context":"Q763.4.1"}},"sccpCgPa":{"scheme":"gt","user":"393492000093","parameters":{"gt-ind":"4","gt-trans-type":"0","network-context":"Q713.4.1"}},"bearerServiceCode":-1,"eventTypeBCSM":2,"highLayerCharacteristics":37249,"callReferenceNumber":"401E70170695BD"}},"event-label-match":false,"callid":"tt-b52-vtas3-seese-0003_3-1719301480904-CALL-1-AppSess-202","event-type":"camel"},"description":"","entry":"callStart.NONE","timestamp":1720768591206,"state":"114","sequence":1,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main"},{"type":"read","fn":"\n/**\n * it is used to implement checks to declare if step was successful or not\n * @param state {Object} state structure, contains at least field session\n * @param event {Object} the event received\n * @return {Boolean} true if step is to be declared successful\n */\nfunction validate(state,event){\n  // it does nothing for now, add your own validation; you have access to state as it was populated from previous steps\n  return true;\n}\n","original-event":{"headers":{"x-fire-and-forget":"no","content-type":"application/json","site-id":"default"},"request-method":"get","body":{"options":{"filter":"(|(romscgt=393492000093)(romscgt=393492000093)(romscgt=39349200009)(romscgt=3934920000)(romscgt=393492000)(romscgt=39349200)(romscgt=3934920)(romscgt=393492)(romscgt=39349)(romscgt=3934)(romscgt=393)(romscgt=39))","time-limit":0,"filter-generator-name":"romscgt","deref":"never","cache-ttl-ms":0,"scope":"one"},"base-dn":"app=mscroaming,dc=apd","hierarchical":"false"},"uri":"/search"},"event":{"headers":{"x-fire-and-forget":"no","content-type":"application/json","site-id":"default"},"request-method":"get","body":{"options":{"filter":"(|(romscgt=393492000093)(romscgt=393492000093)(romscgt=39349200009)(romscgt=3934920000)(romscgt=393492000)(romscgt=39349200)(romscgt=3934920)(romscgt=393492)(romscgt=39349)(romscgt=3934)(romscgt=393)(romscgt=39))","time-limit":0,"filter-generator-name":"romscgt","deref":"never","cache-ttl-ms":0,"scope":"one"},"base-dn":"app=mscroaming,dc=apd","hierarchical":"false"},"uri":"/search"},"description":"LDAP search","entry":"success","timestamp":1720768591284,"state":"342","sequence":5,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main"},{"type":"write","fn":"\n/**\n * Here you can change the event before it is sent using also the state accumulated so far.\n * @param state {Object} state structure, contains at least field session; you can add to it to propagate state from test step to test step\n * @param event {Object} the event to be sent.\n * @return {Object} the event to be sent\n */\nfunction pre_process(state,event){\n  // it does nothing, it is up to you to add some meaningful actions; most likely you want to change the event before being sent\n  // the application adds session field to event automatically, you don't need to add it\n  return event;\n}\n","event":{"event-name":"ldap.status.1000","headers":{"X-LDAP-backend-pool":"sit","Content-Type":"application/json","X-LDAP-site":"default"},"ingress-queue":"h3irs_LdapClientGW_ingress","status":1000,"body":[{"natprefix":"0","ni":"2","objectClass":["mscroaming"],"voicemailflag":"TRUE","continent":"Europe","labapd":"INITLOAD","mscgt":"39349","videomailflag":"FALSE","roampartnername":"Vodafone Italia S.p.A","mccmnc":"22210","CountryCode":"39","latapd":"Updated","selectivererouting":"2","capversion":"2","intprefix":"00","reroutingind":"TRUE","dn":"romscgt=39349,app=mscroaming,dc=apd","lawapd":"1677071944645384","timeoffset":"99","reroutingprefix":"4366030381","romscgt":"39349","optimizedroutingflag":"TRUE","tapcode":"ITAOM"}],"event-type":"ldap"},"original-event":{"event-name":"ldap.status.1000","headers":{"X-LDAP-backend-pool":"sit","Content-Type":"application/json","X-LDAP-site":"default"},"ingress-queue":"h3irs_LdapClientGW_ingress","status":1000,"body":[{"natprefix":"0","ni":"2","objectClass":["mscroaming"],"voicemailflag":"TRUE","continent":"Europe","labapd":"INITLOAD","mscgt":"39349","videomailflag":"FALSE","roampartnername":"Vodafone Italia S.p.A","mccmnc":"22210","CountryCode":"39","latapd":"Updated","selectivererouting":"2","capversion":"2","intprefix":"00","reroutingind":"TRUE","dn":"romscgt=39349,app=mscroaming,dc=apd","lawapd":"1677071944645384","timeoffset":"99","reroutingprefix":"4366030381","romscgt":"39349","optimizedroutingflag":"TRUE","tapcode":"ITAOM"}],"event-type":"ldap"},"description":"handle LDAP","entry":"ldap.status.1000","timestamp":1720768591346,"state":"343","sequence":6,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main"},{"type":"read","fn":"\n/**\n * it is used to implement checks to declare if step was successful or not\n * @param state {Object} state structure, contains at least field session\n * @param event {Object} the event received\n * @return {Boolean} true if step is to be declared successful\n */\nfunction validate(state,event){\n  // it does nothing for now, add your own validation; you have access to state as it was populated from previous steps\n  return true;\n}\n","original-event":{"headers":{"x-fire-and-forget":"no","content-type":"application/json","site-id":"default"},"request-method":"get","body":{"options":{"filter":"(objectClass=*)","time-limit":0,"deref":"always","cache-ttl-ms":0,"scope":"sub"},"base-dn":"amsisdn=436608795113,type=public,type=alias,dc=cpd4","hierarchical":"false"},"uri":"/search"},"event":{"headers":{"x-fire-and-forget":"no","content-type":"application/json","site-id":"default"},"request-method":"get","body":{"options":{"filter":"(objectClass=*)","time-limit":0,"deref":"always","cache-ttl-ms":0,"scope":"sub"},"base-dn":"amsisdn=436608795113,type=public,type=alias,dc=cpd4","hierarchical":"false"},"uri":"/search"},"description":"LDAP search","entry":"success","timestamp":1720768591396,"state":"273","sequence":10,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main"},{"type":"write","fn":"\n/**\n * Here you can change the event before it is sent using also the state accumulated so far.\n * @param state {Object} state structure, contains at least field session; you can add to it to propagate state from test step to test step\n * @param event {Object} the event to be sent.\n * @return {Object} the event to be sent\n */\nfunction pre_process(state,event){\n  // it does nothing, it is up to you to add some meaningful actions; most likely you want to change the event before being sent\n  // the application adds session field to event automatically, you don't need to add it\n  return event;\n}\n","event":{"event-name":"ldap.status.1000","headers":{"X-LDAP-backend-pool":"sit","Content-Type":"application/json","X-LDAP-site":"default"},"ingress-queue":"h3irs_LdapClientGW_ingress","status":1000,"body":[{"vprofile":"VOICEH3APOST","objectClass":["PublicID"],"desc":"ResidentialMSISDN","pidt":"MSISDN","pbt":"POSTPAID","dpcrfp":["DATAH3A","20191015"],"labcpd":"INITLOAD","latcpd":"Added","pimsi":"232149800005113","lawcpd":"1605741898229577","pid":"436608795113","dn":"pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","piccid":"8943052002778015632","pstatus":"ACTIVE"},{"objectClass":["ServiceDATA"],"dsid":"DATA","dn":"dsid=DATA,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4"},{"objectClass":["ServiceDATA"],"dpbcd":"15","dpshthr":"23552","labcpd":"MARTIN","latcpd":"Updated","lawcpd":"1636471938653262","dpsms":"ATO1279","dsid":"20191015","dpqos":"40","dn":"dsid=20191015,dsid=DATA,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","dsprpid":"182","dpbsu":"20000","dpbsd":"50000"},{"dsf":"BlockMobileTv","objectClass":["ServiceDATA"],"dcpara":"FairUseLimit","dvpnid":"0","labcpd":"INITLOAD","latcpd":"Added","dsip":"0.0.0.0","dctarif":"0","lawcpd":"1605741929356729","dsid":"DATAH3A","dpw":"password","dn":"dsid=DATAH3A,dsid=DATA,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","dprvd":"2019-10-31"},{"tsdlmccmnc":"23214","objectClass":["TransientData"],"tsdptgysyv":"118778184","tsdlsvtime":"0","tsdpcst":"0","tsdplrvt":"20230322","tsdpsmsnid64":"0","tsdptgyonv":"0","tsdlimei":"8656440602206401","tsdplbrd":"20240615","tsdpsmsntime":"0","tsdcsh":"tt-b52-pcs91-dgw.5gc.mnc014.mcc232.3gppnetwork.org","labcpd":"tt-b52-pcs91-rtea-0001","latcpd":"pcpupdatecounters","lawcpd":"1720751884760","tssysessst":"1720710077061","tsdptgyoffv":"118778184","tsdblob2":"{\"dataProfile\":{\"current\":{\"dpshthr\":\"23552\",\"dsid\":\"20191015\"},\"before\":{\"dpshthr\":\"23552\",\"dsid\":\"20191015\"}},\"Home\":{\"3\":{\"33\":{\"volume\":82019175},\"06\":{\"volume\":1425930},\"02\":{\"volume\":35312338},\"01\":{\"volume\":20741}}},\"sy\":{\"Home\":{\"3\":{\"33\":{\"volume\":82019175},\"06\":{\"volume\":1425930},\"02\":{\"volume\":35312338},\"01\":{\"volume\":20741}}}}}","dn":"tsdid=1,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","tsdptgyv":"118778184","tsdid":"1","tsdpuv":"0","tsdlimsi":"232149800005113","tssysessblob2":"{\"msisdn\":{\"436608795113\":{\"slr_type\":0,\"sb_h2h\":513720723,\"policyCountersJSON\":\"{\\\"8\\\":\\\"\\\"}\",\"sb_queue\":\"none\",\"sb_e2e\":4461453,\"sb_originHost\":\"tt-b52-pcf91\",\"sb_connectionKey\":1,\"sessionId\":\"tt-b52-pcf91;773394225;756;942;68\",\"sb_originRealm\":\"5gc.mnc014.mcc232.3gppnetwork.org\",\"subscriptionIdMsisdn\":\"436608795113\",\"policyCounters\":{\"8\":\"\"}}}}","tssysessid":"tt-b52-pcf91;773394225;756;942;68","tsdpcs":"base","tsdlsvev":"0","tsdptgysybasev":"118778184"},{"objectClass":["TransientVoice"],"latcpd":"Added","labcpd":"INITLOAD","dn":"tsvid=1,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","tsvid":"1","lawcpd":"1605741898275880"},{"objectClass":["ServiceVOICE"],"dn":"vsid=VOICE,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","vsid":"VOICE"},{"objectClass":["ServiceVOICE"],"latcpd":"Added","labcpd":"INITLOAD","dn":"vsid=VOICEH3APOST,vsid=VOICE,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","lawcpd":"1605741922904481","vsid":"VOICEH3APOST"}],"event-type":"ldap"},"original-event":{"event-name":"ldap.status.1000","headers":{"X-LDAP-backend-pool":"sit","Content-Type":"application/json","X-LDAP-site":"default"},"ingress-queue":"h3irs_LdapClientGW_ingress","status":1000,"body":[{"vprofile":"VOICEH3APOST","objectClass":["PublicID"],"desc":"ResidentialMSISDN","pidt":"MSISDN","pbt":"POSTPAID","dpcrfp":["DATAH3A","20191015"],"labcpd":"INITLOAD","latcpd":"Added","pimsi":"232149800005113","lawcpd":"1605741898229577","pid":"436608795113","dn":"pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","piccid":"8943052002778015632","pstatus":"ACTIVE"},{"objectClass":["ServiceDATA"],"dsid":"DATA","dn":"dsid=DATA,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4"},{"objectClass":["ServiceDATA"],"dpbcd":"15","dpshthr":"23552","labcpd":"MARTIN","latcpd":"Updated","lawcpd":"1636471938653262","dpsms":"ATO1279","dsid":"20191015","dpqos":"40","dn":"dsid=20191015,dsid=DATA,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","dsprpid":"182","dpbsu":"20000","dpbsd":"50000"},{"dsf":"BlockMobileTv","objectClass":["ServiceDATA"],"dcpara":"FairUseLimit","dvpnid":"0","labcpd":"INITLOAD","latcpd":"Added","dsip":"0.0.0.0","dctarif":"0","lawcpd":"1605741929356729","dsid":"DATAH3A","dpw":"password","dn":"dsid=DATAH3A,dsid=DATA,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","dprvd":"2019-10-31"},{"tsdlmccmnc":"23214","objectClass":["TransientData"],"tsdptgysyv":"118778184","tsdlsvtime":"0","tsdpcst":"0","tsdplrvt":"20230322","tsdpsmsnid64":"0","tsdptgyonv":"0","tsdlimei":"8656440602206401","tsdplbrd":"20240615","tsdpsmsntime":"0","tsdcsh":"tt-b52-pcs91-dgw.5gc.mnc014.mcc232.3gppnetwork.org","labcpd":"tt-b52-pcs91-rtea-0001","latcpd":"pcpupdatecounters","lawcpd":"1720751884760","tssysessst":"1720710077061","tsdptgyoffv":"118778184","tsdblob2":"{\"dataProfile\":{\"current\":{\"dpshthr\":\"23552\",\"dsid\":\"20191015\"},\"before\":{\"dpshthr\":\"23552\",\"dsid\":\"20191015\"}},\"Home\":{\"3\":{\"33\":{\"volume\":82019175},\"06\":{\"volume\":1425930},\"02\":{\"volume\":35312338},\"01\":{\"volume\":20741}}},\"sy\":{\"Home\":{\"3\":{\"33\":{\"volume\":82019175},\"06\":{\"volume\":1425930},\"02\":{\"volume\":35312338},\"01\":{\"volume\":20741}}}}}","dn":"tsdid=1,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","tsdptgyv":"118778184","tsdid":"1","tsdpuv":"0","tsdlimsi":"232149800005113","tssysessblob2":"{\"msisdn\":{\"436608795113\":{\"slr_type\":0,\"sb_h2h\":513720723,\"policyCountersJSON\":\"{\\\"8\\\":\\\"\\\"}\",\"sb_queue\":\"none\",\"sb_e2e\":4461453,\"sb_originHost\":\"tt-b52-pcf91\",\"sb_connectionKey\":1,\"sessionId\":\"tt-b52-pcf91;773394225;756;942;68\",\"sb_originRealm\":\"5gc.mnc014.mcc232.3gppnetwork.org\",\"subscriptionIdMsisdn\":\"436608795113\",\"policyCounters\":{\"8\":\"\"}}}}","tssysessid":"tt-b52-pcf91;773394225;756;942;68","tsdpcs":"base","tsdlsvev":"0","tsdptgysybasev":"118778184"},{"objectClass":["TransientVoice"],"latcpd":"Added","labcpd":"INITLOAD","dn":"tsvid=1,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","tsvid":"1","lawcpd":"1605741898275880"},{"objectClass":["ServiceVOICE"],"dn":"vsid=VOICE,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","vsid":"VOICE"},{"objectClass":["ServiceVOICE"],"latcpd":"Added","labcpd":"INITLOAD","dn":"vsid=VOICEH3APOST,vsid=VOICE,pid=436608795113,subs=53540422,acct=H3A,dc=cpd4","lawcpd":"1605741922904481","vsid":"VOICEH3APOST"}],"event-type":"ldap"},"description":"handle LDAP","entry":"ldap.status.1000","timestamp":1720768591437,"state":"295","sequence":11,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main"},{"type":"read","fn":"\n/**\n * it is used to implement checks to declare if step was successful or not\n * @param state {Object} state structure, contains at least field session\n * @param event {Object} the event received\n * @return {Boolean} true if step is to be declared successful\n */\nfunction validate(state,event){\n  // it does nothing for now, add your own validation; you have access to state as it was populated from previous steps\n  return true;\n}\n","original-event":{"headers":{"x-fire-and-forget":"no","content-type":"application/json","site-id":"default"},"request-method":"get","body":{"options":{"filter":"(|(sdbKey=436608795113)(sdbKey=436608795113)(sdbKey=43660879511)(sdbKey=4366087951)(sdbKey=436608795)(sdbKey=43660879)(sdbKey=4366087)(sdbKey=436608)(sdbKey=43660)(sdbKey=4366)(sdbKey=436))","time-limit":0,"filter-generator-name":"sdbKey","deref":"never","cache-ttl-ms":0,"scope":"one"},"base-dn":"app=sdbRecord,dc=apd","hierarchical":"false"},"uri":"/search"},"event":{"headers":{"x-fire-and-forget":"no","content-type":"application/json","site-id":"default"},"request-method":"get","body":{"options":{"filter":"(|(sdbKey=436608795113)(sdbKey=436608795113)(sdbKey=43660879511)(sdbKey=4366087951)(sdbKey=436608795)(sdbKey=43660879)(sdbKey=4366087)(sdbKey=436608)(sdbKey=43660)(sdbKey=4366)(sdbKey=436))","time-limit":0,"filter-generator-name":"sdbKey","deref":"never","cache-ttl-ms":0,"scope":"one"},"base-dn":"app=sdbRecord,dc=apd","hierarchical":"false"},"uri":"/search"},"description":"LDAP search","entry":"none","timestamp":1720768591468,"state":"15","sequence":19,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_H3A_part"},{"type":"write","fn":"\n/**\n * Here you can change the event before it is sent using also the state accumulated so far.\n * @param state {Object} state structure, contains at least field session; you can add to it to propagate state from test step to test step\n * @param event {Object} the event to be sent.\n * @return {Object} the event to be sent\n */\nfunction pre_process(state,event){\n  // it does nothing, it is up to you to add some meaningful actions; most likely you want to change the event before being sent\n  // the application adds session field to event automatically, you don't need to add it\n  return event;\n}\n","event":{"event-name":"ldap.status.1000","headers":{"X-LDAP-backend-pool":"sit","Content-Type":"application/json","X-LDAP-site":"default"},"ingress-queue":"h3irs_LdapClientGW_ingress","status":1000,"body":[{"objectClass":["sdbRecord"],"sdbIMS":"ims.mnc014.mcc232.3gppnetwork.org","labapd":"FIERINA","sdbType":"MOB_OWN","sdbPrimaryNr":"436608795113","latapd":"Updated","sdbNetwork":"POSTPAID","sdbKey":"436608795113","dn":"sdbKey=436608795113,app=sdbRecord,dc=apd","lawapd":"1600240692447853"}],"event-type":"ldap"},"original-event":{"event-name":"ldap.status.1000","headers":{"X-LDAP-backend-pool":"sit","Content-Type":"application/json","X-LDAP-site":"default"},"ingress-queue":"h3irs_LdapClientGW_ingress","status":1000,"body":[{"objectClass":["sdbRecord"],"sdbIMS":"ims.mnc014.mcc232.3gppnetwork.org","labapd":"FIERINA","sdbType":"MOB_OWN","sdbPrimaryNr":"436608795113","latapd":"Updated","sdbNetwork":"POSTPAID","sdbKey":"436608795113","dn":"sdbKey=436608795113,app=sdbRecord,dc=apd","lawapd":"1600240692447853"}],"event-type":"ldap"},"description":"Get and Check","entry":"ldap.status.1000","timestamp":1720768591506,"state":"39","sequence":20,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_H3A_part"},{"type":"read","fn":"\n/**\n * it is used to implement checks to declare if step was successful or not\n * @param state {Object} state structure, contains at least field session\n * @param event {Object} the event received\n * @return {Boolean} true if step is to be declared successful\n */\nfunction validate(state,event){\n  // it does nothing for now, add your own validation; you have access to state as it was populated from previous steps\n  return true;\n}\n","original-event":{"headers":{"x-fire-and-forget":"no","content-type":"application/json","site-id":"default"},"request-method":"get","body":{"options":{"filter":"(|(dontrange=43800303256)(dontrange=43800303256)(dontrange=4380030325)(dontrange=438003032)(dontrange=43800303)(dontrange=4380030)(dontrange=438003)(dontrange=43800)(dontrange=4380)(dontrange=438))","time-limit":0,"filter-generator-name":"dontrange","deref":"never","cache-ttl-ms":0,"scope":"one"},"base-dn":"app=dontreroute,dc=apd","hierarchical":"false"},"uri":"/search"},"event":{"headers":{"x-fire-and-forget":"no","content-type":"application/json","site-id":"default"},"request-method":"get","body":{"options":{"filter":"(|(dontrange=43800303256)(dontrange=43800303256)(dontrange=4380030325)(dontrange=438003032)(dontrange=43800303)(dontrange=4380030)(dontrange=438003)(dontrange=43800)(dontrange=4380)(dontrange=438))","time-limit":0,"filter-generator-name":"dontrange","deref":"never","cache-ttl-ms":0,"scope":"one"},"base-dn":"app=dontreroute,dc=apd","hierarchical":"false"},"uri":"/search"},"description":"LDAP search","entry":"none","timestamp":1720768591559,"state":"442","sequence":32,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_H3A_MOSetup"},{"type":"write","fn":"\n/**\n * Here you can change the event before it is sent using also the state accumulated so far.\n * @param state {Object} state structure, contains at least field session; you can add to it to propagate state from test step to test step\n * @param event {Object} the event to be sent.\n * @return {Object} the event to be sent\n */\nfunction pre_process(state,event){\n  // it does nothing, it is up to you to add some meaningful actions; most likely you want to change the event before being sent\n  // the application adds session field to event automatically, you don't need to add it\n  return event;\n}\n","event":{"event-name":"ldap.status.1000","headers":{"X-LDAP-backend-pool":"sit","Content-Type":"application/json","X-LDAP-site":"default"},"ingress-queue":"h3irs_LdapClientGW_ingress","status":1000,"body":[{"objectClass":["dontreroute"],"labapd":"hagerma","dn":"dontrange=43800303,app=dontreroute,dc=apd","lawapd":"1635943145144657","dontrange":"43800303","latapd":"Added"}],"event-type":"ldap"},"original-event":{"event-name":"ldap.status.1000","headers":{"X-LDAP-backend-pool":"sit","Content-Type":"application/json","X-LDAP-site":"default"},"ingress-queue":"h3irs_LdapClientGW_ingress","status":1000,"body":[{"objectClass":["dontreroute"],"labapd":"hagerma","dn":"dontrange=43800303,app=dontreroute,dc=apd","lawapd":"1635943145144657","dontrange":"43800303","latapd":"Added"}],"event-type":"ldap"},"description":"Check","entry":"ldap.status.1000","timestamp":1720768591817,"state":"443","sequence":33,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_H3A_MOSetup"},{"type":"read","fn":"\n/**\n * it is used to implement checks to declare if step was successful or not\n * @param state {Object} state structure, contains at least field session\n * @param event {Object} the event received\n * @return {Boolean} true if step is to be declared successful\n */\nfunction validate(state,event){\n  // it does nothing for now, add your own validation; you have access to state as it was populated from previous steps\n  return true;\n}\n","original-event":{"diameter":{"template":{"CC-Time-Requested":300,"User-Session-ID":"401E70170695BD-436608795113-43800303256","Called-Party-tel":"tel:+43800303256","Roam-Type":2,"Calling-Vlr-Number":"393492000093","Destination-Realm":"ics.mnc014.mcc232.3gppnetwork.org","Subscription-Id-Data":"436608795113","Node-Functionality":6,"template":"H3A-credit-control-request-initial","CC-Request-Number":0,"Event-Timestamp-UTC":1720768591,"Role-Of-Node":0,"Service-Context-ID":"test232443430002","IMS-Charging-Identifier":"401E70170695BDFEE1719301480903","CC-Request-Type":1,"SDP-Media-Identifier":0,"Session-ID":"irs.b52-t;401E70170695BD;1719301480903","Calling-Party-tel":"tel:+436608795113","SipReq-Timestamp":1719301480},"timeout":"5500"},"event-name":"diameter.request"},"event":{"diameter":{"template":{"CC-Time-Requested":300,"User-Session-ID":"401E70170695BD-436608795113-43800303256","Called-Party-tel":"tel:+43800303256","Roam-Type":2,"Calling-Vlr-Number":"393492000093","Destination-Realm":"ics.mnc014.mcc232.3gppnetwork.org","Subscription-Id-Data":"436608795113","Node-Functionality":6,"template":"H3A-credit-control-request-initial","CC-Request-Number":0,"Role-Of-Node":0,"IMS-Charging-Identifier":"401E70170695BDFEE1719301480903","CC-Request-Type":1,"SDP-Media-Identifier":0,"Session-ID":"irs.b52-t;401E70170695BD;1719301480903","Calling-Party-tel":"tel:+436608795113"},"timeout":"5500"},"event-name":"diameter.request"},"description":"Send CCR-I","entry":"Success","timestamp":1720768591865,"state":"261","sequence":36,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_H3A_MOSetup"},{"type":"write","fn":"\n/**\n * Here you can change the event before it is sent using also the state accumulated so far.\n * @param state {Object} state structure, contains at least field session; you can add to it to propagate state from test step to test step\n * @param event {Object} the event to be sent.\n * @return {Object} the event to be sent\n */\nfunction pre_process(state,event){\n  // it does nothing, it is up to you to add some meaningful actions; most likely you want to change the event before being sent\n  // the application adds session field to event automatically, you don't need to add it\n  return event;\n}\n","event":{"event-name":"diameter.272.response","event-id":null,"diameter":{"header":{"request":false,"e2e":761427603,"error":false,"proxiable":false,"command-code":272,"application-id":4,"h2h":1788469557,"retransmit":false},"connectionKey":0,"avps":[{"name":"Session-Id","code":263,"value":"irs.b52-t;401E70170695BD;1719301480903","vendor":0},{"name":"Origin-Realm","code":296,"value":"ics.mnc014.mcc232.3gppnetwork.org","vendor":0},{"name":"Origin-Host","code":264,"value":"tt-b52-vtas3-rop.ics.mnc014.mcc232.3gppnetwork.org","vendor":0},{"name":"Destination-Realm","code":283,"value":"ics.mnc014.mcc232.3gppnetwork.org","vendor":0},{"name":"Destination-Host","code":293,"value":"tt-b52-vtas3-irs.ics.mnc014.mcc232.3gppnetwork.org","vendor":0},{"name":"Auth-Application-Id","code":258,"value":4,"vendor":0},{"name":"CC-Request-Type","code":416,"value":1,"vendor":0},{"name":"CC-Request-Number","code":415,"value":0,"vendor":0},{"name":"Result-Code","code":268,"value":2001,"vendor":0},{"name":"Multiple-Services-Credit-Control","code":456,"grouped":true,"value":[{"name":"Granted-Service-Unit","code":431,"grouped":true,"value":[{"name":"CC-Time","code":420,"value":1800,"vendor":0}],"vendor":0}],"vendor":0}],"keys":{"Destination-Realm":[{"name":"Destination-Realm","code":283,"value":"ics.mnc014.mcc232.3gppnetwork.org","vendor":0}],"Session-Id":[{"name":"Session-Id","code":263,"value":"irs.b52-t;401E70170695BD;1719301480903","vendor":0}],"Auth-Application-Id":[{"name":"Auth-Application-Id","code":258,"value":4,"vendor":0}],"Origin-Host":[{"name":"Origin-Host","code":264,"value":"tt-b52-vtas3-rop.ics.mnc014.mcc232.3gppnetwork.org","vendor":0}],"Result-Code":[{"name":"Result-Code","code":268,"value":2001,"vendor":0}],"CC-Request-Number":[{"name":"CC-Request-Number","code":415,"value":0,"vendor":0}],"Origin-Realm":[{"name":"Origin-Realm","code":296,"value":"ics.mnc014.mcc232.3gppnetwork.org","vendor":0}],"Destination-Host":[{"name":"Destination-Host","code":293,"value":"tt-b52-vtas3-irs.ics.mnc014.mcc232.3gppnetwork.org","vendor":0}],"CC-Request-Type":[{"name":"CC-Request-Type","code":416,"value":1,"vendor":0}]}},"event-type":"diameter"},"original-event":{"event-name":"diameter.272.response","event-id":null,"diameter":{"header":{"request":false,"e2e":761427603,"error":false,"proxiable":false,"command-code":272,"application-id":4,"h2h":1788469557,"retransmit":false},"connectionKey":0,"avps":[{"name":"Session-Id","code":263,"value":"irs.b52-t;401E70170695BD;1719301480903","vendor":0},{"name":"Origin-Realm","code":296,"value":"ics.mnc014.mcc232.3gppnetwork.org","vendor":0},{"name":"Origin-Host","code":264,"value":"tt-b52-vtas3-rop.ics.mnc014.mcc232.3gppnetwork.org","vendor":0},{"name":"Destination-Realm","code":283,"value":"ics.mnc014.mcc232.3gppnetwork.org","vendor":0},{"name":"Destination-Host","code":293,"value":"tt-b52-vtas3-irs.ics.mnc014.mcc232.3gppnetwork.org","vendor":0},{"name":"Auth-Application-Id","code":258,"value":4,"vendor":0},{"name":"CC-Request-Type","code":416,"value":1,"vendor":0},{"name":"CC-Request-Number","code":415,"value":0,"vendor":0},{"name":"Result-Code","code":268,"value":2001,"vendor":0},{"name":"Multiple-Services-Credit-Control","code":456,"grouped":true,"value":[{"name":"Granted-Service-Unit","code":431,"grouped":true,"value":[{"name":"CC-Time","code":420,"value":1800,"vendor":0}],"vendor":0}],"vendor":0}],"keys":{"Destination-Realm":[{"name":"Destination-Realm","code":283,"value":"ics.mnc014.mcc232.3gppnetwork.org","vendor":0}],"Session-Id":[{"name":"Session-Id","code":263,"value":"irs.b52-t;401E70170695BD;1719301480903","vendor":0}],"Auth-Application-Id":[{"name":"Auth-Application-Id","code":258,"value":4,"vendor":0}],"Origin-Host":[{"name":"Origin-Host","code":264,"value":"tt-b52-vtas3-rop.ics.mnc014.mcc232.3gppnetwork.org","vendor":0}],"Result-Code":[{"name":"Result-Code","code":268,"value":2001,"vendor":0}],"CC-Request-Number":[{"name":"CC-Request-Number","code":415,"value":0,"vendor":0}],"Origin-Realm":[{"name":"Origin-Realm","code":296,"value":"ics.mnc014.mcc232.3gppnetwork.org","vendor":0}],"Destination-Host":[{"name":"Destination-Host","code":293,"value":"tt-b52-vtas3-irs.ics.mnc014.mcc232.3gppnetwork.org","vendor":0}],"CC-Request-Type":[{"name":"CC-Request-Type","code":416,"value":1,"vendor":0}]}},"event-type":"diameter"},"description":"Validate CCA","entry":"diameter.272.response","timestamp":1720768592214,"state":"269","sequence":37,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_H3A_MOSetup"},{"type":"read","fn":"\n/**\n * it is used to implement checks to declare if step was successful or not\n * @param state {Object} state structure, contains at least field session\n * @param event {Object} the event received\n * @return {Boolean} true if step is to be declared successful\n */\nfunction validate(state,event){\n  // it does nothing for now, add your own validation; you have access to state as it was populated from previous steps\n  return true;\n}\n","original-event":{"event-name":"tas.cap.continueCall","as":null,"id":0,"callid":"tt-b52-vtas3-seese-0003_3-1719301480904-CALL-1-AppSess-202","action":{"duration":{"amount":1800},"type":3,"requestedInformation":["CALL_STOP_TIME"]},"eventname":"callStart","event-type":"tas-cap"},"event":{"event-name":"tas.cap.continueCall","as":null,"id":0,"callid":"tt-b52-vtas3-seese-0003_3-1719301480904-CALL-1-AppSess-202","action":{"duration":{"amount":1800},"type":3,"requestedInformation":["CALL_STOP_TIME"]},"eventname":"callStart","event-type":"tas-cap"},"description":"Continue call","entry":"DiameterSuccess.2001","timestamp":1720768592220,"state":"282","sequence":38,"service":"ocadminv5:h3irs:h3irs_InternationalRoamingService_main","flow":"ocadminv5:h3irs:h3irs_H3A_MOSetup"}],"flow":"h3irs_InternationalRoamingService_main","state":{},"description":"A full simulated IDP with LDAP and DIAMETER client simulation to get back the MSRN in the continue. Fails as the timestamp type is string and not integer","tags":"RTEv5,FullCapContinueWithMSRN,Fail"}