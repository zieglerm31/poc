<mxGraphModel connect="1" dx="2260" dy="751" fold="1" grid="1" gridSize="10" guides="1" page="1" pageHeight="1169" pageScale="1" pageWidth="826" tooltips="1">
   <root>
      <mxCell id="0" />
      <mxCell id="1" parent="0" />
      <start action="com.eitg.quasar.nexus.middleware.scxml.handlers.StartHandler" id="114" initial="1" label="" name="" traceCondition="spel:False" traceField="spel:#initial[&quot;event-additional-info&quot;][&quot;tracingid&quot;]" traceList="h3irs_tracing" traceRandom="spel:100" traceTimeout="345600">
         <mxCell parent="1" style="image;html=1;image=clipart/start-button.png;imageBackground=#FFFF00;" vertex="1">
            <mxGeometry as="geometry" height="80" width="80" x="387" y="50" />
         </mxCell>
      </start>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary" function="get_checkIDP" id="128" label="Save IDP" library="h3irs:checkIDP">
         <mxCell parent="1" style="whiteSpace=wrap;html=1;fillColor=#FFB366;rounded=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="367" y="248" />
         </mxCell>
      </typescript-library>
      <mxCell edge="1" id="130" parent="1" source="114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="398" value="callStart.NONE">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="427" y="170" />
               <mxPoint x="427" y="170" />
            </Array>
         </mxGeometry>
      </mxCell>
      <event-generator-handler action="io.qsrlabs.nexus.middleware.scxml.handlers.EvaluateParamsAndGenerateEvent" evt.IDP12-MT="spel:#session[&quot;s_CallType&quot;]==&quot;MTC_IDP12&quot;" evt.IDP2-CFxMO="spel:#session[&quot;s_CallType&quot;]==&quot;CFMOC_IDP2&quot;" evt.IDP2-MO="spel:#session[&quot;s_CallType&quot;]==&quot;MOC_IDP2&quot;" evt.IDP3-CFxMO="spel:#session[&quot;s_CallType&quot;]==&quot;CFMOC_IDP3&quot;" evt.IDP3-MO="spel:#session[&quot;s_CallType&quot;]==&quot;MOC_IDP3&quot;" id="136" label="Check if  &#10;MO or MT ">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="367" y="726" />
         </mxCell>
      </event-generator-handler>
      <mxCell edge="1" id="169" parent="1" source="128" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="274" value="Success">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="171" parent="1" source="136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=1;entryX=1;entryY=0.5;" target="379" value="IDP2-MO">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="397" y="806" />
               <mxPoint x="250" y="806" />
               <mxPoint x="250" y="696" />
            </Array>
            <mxPoint as="targetPoint" x="70" y="796" />
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="172" parent="1" source="136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" target="400" value="IDP12-MT">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="682" y="756" />
               <mxPoint x="682" y="640" />
               <mxPoint x="850" y="640" />
               <mxPoint x="850" y="608" />
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="173" parent="1" source="136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=1;entryY=0.75;" target="379" value="IDP3-MO">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="427" y="851" />
               <mxPoint x="230" y="851" />
               <mxPoint x="230" y="711" />
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="216" parent="1" source="128" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" target="390" value="No_IDP">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <mxCell id="255" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;h3irs_InternationalRoamingService_main&#10;&#10;Author: MaZi - HPE&#10;&#10;Based on specification:&#10;vTAS ICS International Roaming Service vIRS&#10;" vertex="1">
         <mxGeometry as="geometry" height="124" width="260" x="-503" y="50" />
      </mxCell>
      <invoke-subflow action="io.qsrlabs.nexus.middleware.scxml.handlers.Subflow" category="procedure" id="259" label="MO-Setup" subflow="h3irs:h3irs_MO_Setup">
         <mxCell parent="1" style="rectangle;shape=ext;html=1;whiteSpace=wrap;align=center;rounded=0;shadow=0;glass=0;fillColor=#CCCCFF;gradientColor=none;strokeColor=#000000;perimeterSpacing=0;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="94" y="1655" />
         </mxCell>
      </invoke-subflow>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler" id="261" isfinal="yes" label="Stop">
         <mxCell parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#CC0000;" vertex="1">
            <mxGeometry as="geometry" height="80" width="80" x="387" y="1778" />
         </mxCell>
      </stop>
      <invoke-subflow action="io.qsrlabs.nexus.middleware.scxml.handlers.Subflow" category="procedure" id="265" label="MT-Setup" subflow="h3irs:h3irs_MT_Setup">
         <mxCell parent="1" style="rectangle;shape=ext;html=1;whiteSpace=wrap;align=center;rounded=0;shadow=0;glass=0;fillColor=#CCCCFF;gradientColor=none;strokeColor=#000000;perimeterSpacing=0;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="622" y="1655" />
         </mxCell>
      </invoke-subflow>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary" function="prepareRoData" id="269" label="PrepareRoData" library="h3irs:prepareRoData">
         <mxCell parent="1" style="whiteSpace=wrap;html=1;fillColor=#FFB366;rounded=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="94" y="1525" />
         </mxCell>
      </typescript-library>
      <clojure-library action="io.qsrlabs.nexus.ldap.gui.LdapSearchHandler" base-dn="spel:&quot;amsisdn=&quot; + #session[&quot;s_CallingPartyNrNorm&quot;][&quot;user&quot;] + &quot;,type=public,type=alias,dc=cpd4&quot;" cache-ttl-ms="spel:0" deref="always" filter-generator-min-length="spel:3" function="search" hierarchical="false" id="273" label="LDAP search&#10;CPD4" library="io.qsrlabs.nexus.ldap.gui.handler" queue="spel:#session[&quot;profile&quot;][&quot;ldap_queue_name&quot;]" scope="sub">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="94" y="936" />
         </mxCell>
      </clojure-library>
      <undefined action="com.eitg.quasar.nexus.siphandlers.GetConfiguration" configuration="meta.qp.ROP_ocs_profiles" id="274" label="Fetch&#10;OCS profile &#10;from redis" refreshPeriod="spel:#session[&quot;profile&quot;][&quot;refresh_ocsprofiles&quot;] " slot="ocs_Profiles">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="367" y="340" />
         </mxCell>
      </undefined>
      <mxCell id="275" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Store incoming&#10;IDP" vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="190" y="211" />
      </mxCell>
      <mxCell id="276" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Fetch the OCS profiles from Redis." vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="190" y="340" />
      </mxCell>
      <undefined DefaultCC="spel:#session[&quot;s_Norm_prefix&quot;]" ShortCodeLen="" action="com.eitg.quasar.nexus.siphandlers.NumberNormalization" address="spel:#session[&quot;s_IDP&quot;][&quot;event&quot;][&quot;callStart&quot;][&quot;leg&quot;]" id="277" label="Number normalization&#10;CallingParty" slot="s_CallingPartyNrNorm">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="94" y="821" />
         </mxCell>
      </undefined>
      <mxCell edge="1" id="278" parent="1" source="274" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="342" value="success">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="427" y="440" />
               <mxPoint x="427" y="440" />
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="279" parent="1" source="274" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" target="324" value="error">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <undefined DefaultCC="spel:#session[&quot;s_Norm_prefix&quot;]" ShortCodeLen="spel:3" action="com.eitg.quasar.nexus.siphandlers.NumberNormalization" address="spel:#session[&quot;s_IDP&quot;][&quot;event&quot;][&quot;callStart&quot;][&quot;contact&quot;]" id="281" label="Number normalization&#10;CalledParty" slot="s_CalledPartyNrNorm">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="622" y="821" />
         </mxCell>
      </undefined>
      <mxCell id="282" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Determine MO or &#10;MT" vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="502" y="672" />
      </mxCell>
      <mxCell id="283" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Normalize&#10;CallingNr." vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="-46" y="824" />
      </mxCell>
      <mxCell id="284" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Normalize&#10;CalledNr." vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="800" y="824" />
      </mxCell>
      <clojure-library action="io.qsrlabs.nexus.ldap.gui.LdapSearchHandler" base-dn="spel:&quot;amsisdn=&quot; + #session[&quot;s_CalledPartyNrNorm&quot;][&quot;user&quot;] + &quot;,type=public,type=alias,dc=cpd4&quot;" cache-ttl-ms="spel:0" deref="always" filter-generator-min-length="spel:3" function="search" hierarchical="false" id="285" label="LDAP search&#10;CPD4" library="io.qsrlabs.nexus.ldap.gui.handler" queue="spel:#session[&quot;profile&quot;][&quot;ldap_queue_name&quot;]" scope="sub">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="622" y="936" />
         </mxCell>
      </clojure-library>
      <mxCell edge="1" id="286" parent="1" source="277" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="273" value="success">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="287" parent="1" source="281" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="285" value="success">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell id="289" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Search&#10;CalledNr" vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="800" y="926" />
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary" function="prepareRoData" id="290" label="PrepareRoData" library="h3irs:prepareRoData">
         <mxCell parent="1" style="whiteSpace=wrap;html=1;fillColor=#FFB366;rounded=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="622" y="1525" />
         </mxCell>
      </typescript-library>
      <mxCell edge="1" id="291" parent="1" source="273" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="295" value="ldap.status.1000">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="292" parent="1" source="285" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="297" value="ldap.status.1000">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="293" parent="1" source="269" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="259">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="294" parent="1" source="290" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="265">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary" function="validateLDAP_Subsc_resp" id="295" label="handle LDAP&#10;response" library="h3irs:handleLDAP">
         <mxCell parent="1" style="whiteSpace=wrap;html=1;fillColor=#FFB366;rounded=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="94" y="1066" />
         </mxCell>
      </typescript-library>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary" function="validateLDAP_Subsc_resp" id="297" label="handle LDAP&#10;response" library="h3irs:handleLDAP">
         <mxCell parent="1" style="whiteSpace=wrap;html=1;fillColor=#FFB366;rounded=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="622" y="1066" />
         </mxCell>
      </typescript-library>
      <mxCell edge="1" id="298" parent="1" source="295" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="300" value="Success">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="299" parent="1" source="297" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="302" value="Success">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <undefined DefaultCC="spel:#session[&quot;s_Norm_prefix&quot;]" ShortCodeLen="spel:3" action="com.eitg.quasar.nexus.siphandlers.NumberNormalization" address="spel:#session[&quot;s_IDP&quot;][&quot;event&quot;][&quot;callStart&quot;][&quot;contact&quot;]" id="300" label="Number normalization&#10;CalledParty" slot="s_CalledPartyNrNorm">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="94" y="1236" />
         </mxCell>
      </undefined>
      <mxCell edge="1" id="301" parent="1" source="300" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="331" value="success">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="154" y="1360" />
               <mxPoint x="154" y="1360" />
            </Array>
         </mxGeometry>
      </mxCell>
      <undefined DefaultCC="spel:#session[&quot;s_Norm_prefix&quot;]" ShortCodeLen="" action="com.eitg.quasar.nexus.siphandlers.NumberNormalization" address="spel:#session[&quot;s_IDP&quot;][&quot;event&quot;][&quot;callStart&quot;][&quot;leg&quot;]" id="302" label="Number normalization&#10;CallingParty" slot="s_CallingPartyNrNorm">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="622" y="1236" />
         </mxCell>
      </undefined>
      <mxCell edge="1" id="303" parent="1" source="302" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="290" value="success">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell id="304" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Start MO-Setup&#10;phase" vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="-47" y="1658" />
      </mxCell>
      <mxCell edge="1" id="305" parent="1" source="259" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0;entryY=0.5;" target="261" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="307" parent="1" source="265" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=1;entryY=0.5;" target="261" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell id="308" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Start MT-Setup&#10;phase" vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="759" y="1658" />
      </mxCell>
      <undefined action="com.eitg.quasar.nexus.occp.cap.handlers.AbortCall" cause="REJECTED" id="309" label="Terminate call" message="spel:#session[&quot;s_IDP&quot;]" name="">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="367" y="1236" />
         </mxCell>
      </undefined>
      <mxCell edge="1" id="310" parent="1" source="300" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" target="309" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="311" parent="1" source="302" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;entryX=1;entryY=0.5;" target="309" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="313" parent="1" source="309" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="261" value="callEnd">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="314" parent="1" source="295" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.25;" target="309" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="315" parent="1" source="297" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;entryX=1;entryY=0.25;" target="309" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="316" parent="1" source="273" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0.25;entryY=0;" target="309" value="ldap.*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="321" parent="1" source="285" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;entryX=0.75;entryY=0;" target="309" value="ldap.*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="322" parent="1" source="277" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.75;entryX=0.5;entryY=0;" target="309" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="323" parent="1" source="281" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.75;entryX=0.5;entryY=0;" target="309" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <undefined action="com.eitg.quasar.nexus.occp.cap.handlers.AbortCall" cause="REJECTED" id="324" label="Terminate call" message="spel:#session[&quot;s_IDP&quot;]" name="">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="747" y="340" />
         </mxCell>
      </undefined>
      <mxCell edge="1" id="325" parent="1" source="324" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=0;entryX=0.5;entryY=1;" target="390" value="callEnd">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <undefined DefaultCC="spel:#session[&quot;s_Norm_prefix&quot;]" ShortCodeLen="" action="com.eitg.quasar.nexus.siphandlers.NumberNormalization" address="spel:#session[&quot;s_IDP&quot;][&quot;event&quot;][&quot;camel&quot;][&quot;origCalledPartyID&quot;]" id="326" label="Number normalization&#10;CallingParty CFx" slot="s_CallingPartyNrNorm">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="-243" y="818" />
         </mxCell>
      </undefined>
      <mxCell edge="1" id="327" parent="1" source="136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;entryX=1;entryY=0.5;" target="368" value="IDP2-CFxMO">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="34" y="756" />
               <mxPoint x="34" y="760" />
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="328" parent="1" source="136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.75;entryX=1;entryY=0.75;" target="368" value="IDP3-CFxMO">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="34" y="771" />
               <mxPoint x="34" y="775" />
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="329" parent="1" source="326" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0;entryY=0.5;" target="273" value="success">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell id="288" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Search&#10;CallingNr." vertex="1">
         <mxGeometry as="geometry" height="54" width="120" x="-56" y="926" />
      </mxCell>
      <mxCell edge="1" id="330" parent="1" source="326" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.25;exitY=1;entryX=0.25;entryY=1;" target="309" value="*">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="-213" y="1326" />
               <mxPoint x="397" y="1326" />
            </Array>
         </mxGeometry>
      </mxCell>
      <event-generator-handler action="io.qsrlabs.nexus.middleware.scxml.handlers.EvaluateParamsAndGenerateEvent" evt.CMI="spel:#session[&quot;s_ServiceVOICEObj&quot;][&quot;vsid&quot;]==&quot;VOICECMI&quot;" evt.ELITE="spel:#session[&quot;s_ServiceVOICEObj&quot;][&quot;vsid&quot;]==&quot;VOICEELITE&quot;" id="331" label="Check if  &#10;H3A ">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="94" y="1376" />
         </mxCell>
      </event-generator-handler>
      <clojure-library action="io.qsrlabs.nexus.ldap.gui.LdapSearchHandler" base-dn="app=mscroaming,dc=apd" cache-ttl-ms="spel:0" deref="never" filter-generator-auto="true" filter-generator-min-length="spel:2" filter-generator-name="romscgt" filter-generator-value="spel:#session[&quot;s_MSCRoamingDN&quot;]" function="search" hierarchical="false" id="342" label="LDAP search&#10;APD - mscroaming&#10;" library="io.qsrlabs.nexus.ldap.gui.handler" queue="spel:#session[&quot;profile&quot;][&quot;ldap_queue_name&quot;]" scope="one">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="367" y="460" />
         </mxCell>
      </clojure-library>
      <typescript-library action="io.qsrlabs.nexus.middleware.scxml.handlers.TypeScriptLibrary" function="validate_MSCRoaming_resp" id="343" label="handle LDAP&#10;response" library="h3irs:handleLDAP">
         <mxCell parent="1" style="whiteSpace=wrap;html=1;fillColor=#FFB366;rounded=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="367" y="590" />
         </mxCell>
      </typescript-library>
      <mxCell edge="1" id="344" parent="1" source="342" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="343" value="ldap.status.1000">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="347" parent="1" source="342" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0.5;entryY=1;" target="324" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="348" parent="1" source="343" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;" target="136" value="Success">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="351" parent="1" source="343" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0.75;entryY=1;" target="324" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell id="352" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Search mscroaming table to get Country Code for normalization" vertex="1">
         <mxGeometry as="geometry" height="77" width="120" x="190" y="452" />
      </mxCell>
      <mxCell id="353" parent="1" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=center;spacingTop=-6;fillColor=#FFFFCC;" value="&#10;Set CountryCode for&#10;normalization" vertex="1">
         <mxGeometry as="geometry" height="58" width="120" x="210" y="580" />
      </mxCell>
      <mxCell edge="1" id="354" parent="1" source="331" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.3;entryY=0;entryPerimeter=0;" target="372" value="CMI">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="154" y="1473" />
               <mxPoint x="-50" y="1473" />
            </Array>
         </mxGeometry>
      </mxCell>
      <invoke-subflow action="io.qsrlabs.nexus.middleware.scxml.handlers.Subflow" category="procedure" id="355" label="H3A_part" subflow="h3irs:h3irs_H3A_part">
         <mxCell parent="1" style="rectangle;shape=ext;html=1;whiteSpace=wrap;align=center;rounded=0;shadow=0;glass=0;fillColor=#CCCCFF;gradientColor=none;strokeColor=#000000;perimeterSpacing=0;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="-243" y="1525" />
         </mxCell>
      </invoke-subflow>
      <mxCell edge="1" id="359" parent="1" source="355" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0;entryY=1;" target="261" value="*">
         <mxGeometry as="geometry" relative="1">
            <Array as="points">
               <mxPoint x="-183" y="1846" />
            </Array>
         </mxGeometry>
      </mxCell>
      <mxCell edge="1" id="361" parent="1" source="114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.75;entryX=0.5;entryY=0;" target="366" value="sip.callStart.NONE">
         <mxGeometry as="geometry" relative="1" x="0.0062" y="10">
            <Array as="points">
               <mxPoint x="47" y="110" />
            </Array>
            <mxPoint as="offset" />
         </mxGeometry>
      </mxCell>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler" id="362" isfinal="yes" label="Stop">
         <mxCell parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#CC0000;" vertex="1">
            <mxGeometry as="geometry" height="80" width="80" x="7" y="547" />
         </mxCell>
      </stop>
      <invoke-subflow action="io.qsrlabs.nexus.middleware.scxml.handlers.Subflow" category="procedure" id="364" label="H3A_SIP_part" subflow="h3irs:h3irs_H3A_SIP_part">
         <mxCell parent="1" style="rectangle;shape=ext;html=1;whiteSpace=wrap;align=center;rounded=0;shadow=0;glass=0;fillColor=#CCCCFF;gradientColor=none;strokeColor=#000000;perimeterSpacing=0;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="-13" y="385" />
         </mxCell>
      </invoke-subflow>
      <mxCell edge="1" id="365" parent="1" source="364" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;" target="362" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="IRS" counter="H3A_SIP_CA" id="366" label="H3A_SIP_CA" name="H3A_SIP_CA" type="H3A_SIP_CA">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="-13" y="208" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="367" parent="1" source="366" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="364">
         <mxGeometry as="geometry" relative="1">
            <Array as="points" />
         </mxGeometry>
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="IRS" counter="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" id="368" label="MOCF_CA" name="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" type="MO_CF_CA">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="-420" y="730" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="369" parent="1" source="368" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0;entryY=0.5;" target="326">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="IRS" counter="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" id="370" label="H3A_MO_CF_CA" name="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" type="H3A_MO_CF_CA">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="-380" y="1376" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="371" parent="1" source="370" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0;entryY=0.5;" target="355">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="IRS" counter="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" id="372" label="CMI_MO_CF_CA" name="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" type="CMI_MO_CF_CA">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="-86" y="1525" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="373" parent="1" source="372" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" target="269">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="IRS" counter="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" id="374" label="Elite_MO_CF_CA" name="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" type="Elite_MO_CF_CA">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="260" y="1525" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="375" parent="1" source="331" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0.5;entryY=0;" target="374" value="ELITE">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="376" parent="1" source="374" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;" target="269">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="IRS" counter="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" id="377" label="MTC_CA" name="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" type="MT_CA">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="930" y="726" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="378" parent="1" source="377" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="281">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="IRS" counter="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" id="379" label="MO_CA" name="spel:#session[&quot;s_MSCRoamingRespBody&quot;][0][&quot;romscgt&quot;].toString()" type="MO_CA">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="94" y="666" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="380" parent="1" source="379" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;" target="277">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="383" parent="1" source="331" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;" target="370" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <invoke-subflow action="io.qsrlabs.nexus.middleware.scxml.handlers.Subflow#combobox" category="transfer" id="386" label="Subflow &#10;sip Options and Unknown" subflow="h3irs:sip_options">
         <mxCell parent="1" style="image;html=1;image=clipart/subflow-static.png;imageBackground=#CCCCFF;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="-211" y="208" />
         </mxCell>
      </invoke-subflow>
      <mxCell edge="1" id="388" parent="1" source="114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.5;" target="386" value="sip.sessionStart.OPTIONS">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler" id="390" isfinal="yes" label="">
         <mxCell parent="1" style="image;html=1;image=clipart/plain-stop.png;imageBackground=#CC0000;" vertex="1">
            <mxGeometry as="geometry" height="80" width="80" x="767" y="198" />
         </mxCell>
      </stop>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="startstop" counter="globalerror" id="391" label="Stats GlobalError" name="globalerror" type="event">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="590" y="60" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="392" parent="1" source="114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" target="391" value="global.error">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="393" parent="1" source="391" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0.5;entryY=0;" target="390">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <mxCell edge="1" id="397" parent="1" source="114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0;exitY=0.25;entryX=0.25;entryY=0;" target="386" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <counter action="com.eitg.quasar.nexus.middleware.scxml.handlers.CustomCounterHandler" category="IRS" counter="H3A_CAP_CA" id="398" label="H3A_CAP_CA" name="H3A_CAP_CA" type="H3A_CAP_CA">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="367" y="160" />
         </mxCell>
      </counter>
      <mxCell edge="1" id="399" parent="1" source="398" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="128">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <event-generator-handler action="io.qsrlabs.nexus.middleware.scxml.handlers.EvaluateParamsAndGenerateEvent" evt.callInAustria="spel:#session[&quot;s_callInAustria&quot;] == &quot;Y&quot;" id="400" label="check if it was a CS call DP12 in Austria">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;double=1;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="930" y="578" />
         </mxCell>
      </event-generator-handler>
      <mxCell edge="1" id="401" parent="1" source="400" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" target="377" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <undefined CON.callingParty="" CON.callingParty.network-context="" CON.callingPartyCategory="" CON.destination="" CON.destination.network-context="" FCI="" FW.destination="" FW.scheme="" action="com.eitg.quasar.nexus.occp.cap.handlers.LeaveCall" id="402" label="Leave call" message="spel:#session[&quot;s_IDP&quot;]" name="">
         <mxCell parent="1" style="rectangle;shape=ext;rounded=1;html=1;whiteSpace=wrap;" vertex="1">
            <mxGeometry as="geometry" height="60" width="120" x="1200" y="578" />
         </mxCell>
      </undefined>
      <mxCell edge="1" id="403" parent="1" source="400" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" target="402" value="callInAustria">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
      <stop action="com.eitg.quasar.nexus.middleware.scxml.handlers.StopHandler" id="405" isfinal="yes" label="Stop">
         <mxCell parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#CC0000;" vertex="1">
            <mxGeometry as="geometry" height="80" width="80" x="1470" y="568" />
         </mxCell>
      </stop>
      <mxCell edge="1" id="406" parent="1" source="402" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" target="405" value="*">
         <mxGeometry as="geometry" relative="1" />
      </mxCell>
   </root>
</mxGraphModel>